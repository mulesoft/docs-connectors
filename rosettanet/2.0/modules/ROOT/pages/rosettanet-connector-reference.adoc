= RosettaNet Connector 2.0 Reference - Mule 4
:page-aliases: connectors::rosettanet/rosettanet-connector-reference.adoc

Anypoint Connector for RosettaNet (Rosettanet Connector) provides B2B functionality that uses the RosettaNet Information Framework (RNIF) for the information exchange of Rosetta Partner Interface Process (PIP) messages.

Release Notes: xref:release-notes::connector/rosettanet-connector-release-notes-mule-4.adoc[RosettaNet Connector Release Notes]

[[config]]
== Configurations

Default configurations for RosettaNet Connector.

=== Parameters
[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
|Name | String | Name of this configuration. Connectors reference the configuration with this name. | | x
| Global HTTP Listener a| String |  Reference to the global HTTP Listener definition for the service endpoint that the partner uses for both action and signal messages.|  | x
| Service Endpoint Path a| String | Service endpoint path, appended to the base path of HTTP Listener.|  | x
| Global HTTP Request a| String |  Global HTTP request definition for the partner service endpoint. This value is used when sending both action and signal messages. |  | x
| Request Endpoint Path a| String |  Partner endpoint path, appended to base path on HTTP request. |  | x
| Keystore path a| String |  Keystore that contains trusted partner certificates and the connector's private signing key and certificate (JKS format).|  |
| Keystore access password a| String |  Access password for the keystore. |  |
| Signing key password a| String |  Private signing key password (required if signing either action or signal messages). |  |
| Override message signing a| Enumeration, one of:

** ALWAYS
** NEVER |  Turns message signing on or off. Setting this value to `ALWAYS` overrides the signing configured by the PIP definition. |  |
| Global usage code a| Enumeration, one of:

** Test
** Production | Whether to operate in test mode or production mode.|  Production|
a| Object store reference a| Object Store |  Object store configuration reference:

* If specified, the connector uses the referenced object store configuration to retain sent messages for acknowledgments or retries.
* If not specified, the connector uses the default persistent object store to retain sent messages for acknowledgments or retries. 
|  |
| Mule DUNS identifier a| String |  DUNS business identifier for the organization. |  | x
a| Mule location identifier a| String |  Location Identifier for the organization:

*  If specified, this value is included in all sent messages and verified in all received messages. 
* If not specified, no value is sent, and received values are ignored. |  |
| Partner DUNS identifier a| String |  Expected DUNS business identifier for the partner organization.|  | x
| Partner location identifier a| String |  Expected location identifier for the partner organization. 

* If specied, this value is included in all sent messages and verified in all received messages. 
* If not specified, no value is sent, and received values are ignored. |  |
| Role in PIP a| Enumeration, one of:

** INITIATOR
** RESPONDER |  Connector's role in PIP usage. |  | x
| PIP definition path a| String |  PIP file path.|  | x
| Expiration Policy a| <<ExpirationPolicy>> |  Configures the minimum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration.
This does not mean that the platform expires the instance at the exact moment that it becomes eligible. Mule purges the instances as appropriate.|  |
|===

== Sources
* <<actionSource>>
* <<completionSource>>

[[actionSource]]
=== Action Source
`<rosetta:action-source>`

==== Parameters
[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Primary Node Only a| Boolean |  Determines whether to execute this source on only the primary node when running Mule instances in a cluster.|  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>

* <<non-repeatable-stream>> |  Configures how Mule processes streams. By default, Mule uses repeatable streams. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Configures a policy for processing the redelivery of the same message. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| <<MessageAttributes>>
|===

==== For Configurations
* <<config>>

[[completionSource]]
=== Completion Source
`<rosetta:completion-source>`

==== Parameters
[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Primary Node Only a| Boolean |  Whether this source should be executed only on the primary node when running in a cluster. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> | Configures a policy for processing the redelivery of the same message.   |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |<<Completion>>
| Attributes Type a| <<MessageAttributes>>
|===

==== For Configurations
* <<config>>

== Operations
* <<sendAction>>

[[sendAction]]
=== Send Action
`<rosetta:send-action>`

==== Parameters
[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Initiating action a| <<ReplyAttributes>> |  |  |
| Content a| Binary |  |  `#[payload]` |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior.|  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and stores the expression outcome in the target variable. |  `#[payload]` |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| <<MessageAttributes>>
|===

==== For Configurations
* <<config>>

==== Throws
* ROSETTA:WRITE
* ROSETTA:CONFIGURATION
* ROSETTA:PARSE
* ROSETTA:UNKNOWN

== Object Types

[[Completion]]
=== Completion

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Completion Code a| Enumeration, one of:

** SUCCESS
** FAILURE
** EXCEPTION a| Type of completion for action message. Valid values are:

*** SUCCESS: An acknowledgment signal was received from the partner.
*** EXCEPTION: An exception signal was received from the partner.
*** FAILURE: No response signal was received from the partner after the number of transmission attempts defined in the PIP configuration. |  | x
| Exception Detail a| <<ExceptionDetail>> | Details from received exception signal. Present if the completion code is `EXCEPTION`. |  |
| Mime Data a| Binary | Received MIME signal message provided to the application in support of signed acknowledgment signals. Present if the completion code is `SUCCESS` or `EXCEPTION`. |  |
|===

[[ExpirationPolicy]]
=== Expiration Policy

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | Configures the maximum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. |  |
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the *Max Idle Time* field. |  |
|===

[[MessageAttributes]]
=== Message Attributes

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Message Id a| String | Unique identifier of the message. |  | x
| Partner Business Id a| String | Unique identifier of the trading partner. |  | x
| Partner Location Id a| String | Identifier that represents the trading partner's location. |  | x
| Reply Attributes a| <<ReplyAttributes>> | Identifier values used when generating an action message in reply to another action. The *Action* source sets this value. |  | x
| Mime Data a| Binary | MIME action or signal message, including the signature, if signing is used. The app supplies this value to
 support non-repudiation. |  | x
| Acknowledge Data a| Binary | MIME acknowledgment signal returned to the sender, including the signature if signing is used. The *Action* source sets this value. |  | x
|===

[[ExceptionDetail]]
=== Exception Detail

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Exception Code a| String | Error code. |  | x
| Exception Error Description a| String | Error description.
 |  | x
| Exception Component Code a| String | Code that identifies the transaction for which the error occurred. |  | x
| Exception Type a| String | Error category. |  | x
|===

[non-repeatable-stream]
=== Non-repeatable Stream

Disables the repeatable stream functionality and uses non-repeatable streams to have less performance overhead, memory use, and cost.

[[reconnect]]
=== Reconnect

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| Count a| Number | How many reconnection attempts to make. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[reconnect-forever]]
=== Reconnect Forever

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[RedeliveryPolicy]]
=== Redelivery Policy

Configures the redelivery policy for executing requests that generate errors. You can add a redelivery policy to any source in a flow.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | Maximum number of times that a message can be redelivered and processed unsuccessfully before triggering a `process-failed-message`. |  |
| Use Secure Hash a| Boolean | Secure hashing algorithm to use if <b>Use Secure Hash<b/> is `true`. If the payload of the message is a Java object, Mule ignores this value and returns the value that the payloadâ€™s `hashCode()` returned. |  |
| Message Digest Algorithm a| String | Secure hashing algorithm to use. | `SHA-256` |
| Id Expression a| String | One or more expressions that determine when a message was redelivered. This property can be set only if <b>Use Secure Hash</b> is `false`. |  |
| Object Store a| Object Store | Configures the object store that stores the redelivery counter for each message. |  |
|===

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max In Memory Size a| Number | Maximum memory that the stream should use to keep data in memory. If more than that is consumed then it starts to buffer the content onto disk. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which `maxInMemorySize is expressed`. |  |
|===

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | Initial amount of memory to allocate to the data stream. If the streamed data exceeds this value, the buffer expands by *Buffer Size Increment*, with an upper limit of *Max In Memory Size value*. |  |
| Buffer Size Increment a| Number | Amount by which the buffer size expands if it exceeds its initial size. Setting a value of `0` or lower specifies that the buffer can't expand.|  |
| Max Buffer Size a| Number | Maximum size of the buffer. If the buffer size exceeds this value, Mule raises a `STREAM_MAXIMUM_SIZE_EXCEEDED` error. A value of less than or equal to `0` means no limit.|  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the <b>Initial Buffer Size</b>, <b>Buffer Size Increment</b>, and <b>Max Buffer Size>/b> fields. |  |
|===

[[ReplyAttributes]]
=== Reply Attributes

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Message Id a| String | Identifier of the message associated with the reponse. |  | x
| Action Id a| String | Identifier that indicates the type of respone. |  | x
| Pip Instance Id a| String | Identifier associated with an instance of a Partner Interface Process. |  | x
|===

== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
