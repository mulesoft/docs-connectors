= Azure Event Hubs Connector Reference 1.1 - Mule 4

Anypoint Connector for Azure Event Hubs (Azure Event Hubs Connector) enables support for event producing and consuming.


== Configurations
---
[[AzureEventhubs]]
=== Azure Event Hubs


This class represents an extension configuration, values set in this class are commonly used across multiple operations since they represent something core from the extension.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
|Name | String | Name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<AzureEventhubs_ActiveDirectoryAuthentication, Active Directory Authentication>> 
* <<AzureEventhubs_SasAuthentication, SAS Authentication>> 
 | The connection types to provide to this configuration. | | x
| Name a| String |  ID used to reference this configuration. |  | x
| Expiration Policy a| <<ExpirationPolicy>> |  Configures the minimum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration.   |  | 
|===

==== Connection Types
[[AzureEventhubs_ActiveDirectoryAuthentication]]
===== Active Directory Authentication


====== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Token Credential Properties a| <<TokenCredentialProperties>> |  To acquires a token via service principal authentication |  | 
| Use Azure Default Credential a| Boolean |  Use DefaultAzureCredentials Mechanism |  false | 
| Namespace a| String |  The Event Hubs namespace name. |  | x
| Azure Endpoint a| String |  Fully qualified domain name of the Event Hubs namespace. |  servicebus.windows.net | 
| Authority Host a| String |  Specifies the Azure Active Directory host. If not valued it default to: https://login.microsoftonline.com/ |  | 
| Event Hub Name a| String |  The name of the Event Hub. |  | x
| Share Connection a| Boolean |  Toggles the builder to use the same connection for producers or consumers. |  false | 
| Checkpoint Store Type a| One of:

* <<AzureBlobStorageSasAuthentication>>
* <<AzureBlobStorageActiveDirectoryAuthentication>> |  To select the Checkpointing Connection Provider |  | 
| Reconnection a| <<Reconnection>> |  When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  | 
|===
[[AzureEventhubs_SasAuthentication]]
===== SAS Authentication


====== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Namespace a| String |  The Event Hubs namespace name. |  | x
| Shared Access Key Name a| String |  Name of the shared access key given by Azure. |  | x
| Shared Access Key a| String |  Value of the shared access key given by Azure. |  | x
| Event Hub Name a| String |  The name of the Event Hub. |  | x
| Share Connection a| Boolean |  Toggles the builder to use the same connection for producers or consumers. |  false | 
| Checkpoint Store Type a| One of:

* <<AzureBlobStorageSasAuthentication>>
* <<AzureBlobStorageActiveDirectoryAuthentication>> |  To select Azure Blob Storage Connection Provider |  | 
| Reconnection a| <<Reconnection>> |  When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  | 
|===

== Supported Operations
* <<BulkPublish>> 
* <<Publish>> 

==== Associated Sources
* <<PartitionListener>> 
* <<EventhubListener>> 


== Operations

[[BulkPublish]]
== Bulk Publish
`<azure-eventhubs:bulk-publish>`


Send an Events in Bulk to a specified Event Hub


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Events a| Array of <<Event>> |  The event's content |  #[payload] | 
| Correlation Id a| String |  |  | 
| Content Type a| String |  |  | 
| Max Batch Size In Bytes a| Number |  |  0 | 
| Config Ref a| ConfigurationProvider |  Name of the configuration to use to execute this component. |  | x
| Partition Id a| String |  |  | 
| Partition Key a| String |  |  | 
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  | 
|===


=== For Configurations

* <<AzureEventhubs>> 

=== Throws

* AZURE-EVENTHUBS:AEH_ERROR 
* AZURE-EVENTHUBS:AUTHENTICATION 
* AZURE-EVENTHUBS:CONNECTIVITY 
* AZURE-EVENTHUBS:INVALID_INPUT 
* AZURE-EVENTHUBS:RETRY_EXHAUSTED 


[[Publish]]
== Send a single event
`<azure-eventhubs:publish>`


Send an Event to a specified Event Hub


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Event a| <<Event>> |  The event's content |  #[payload] | 
| Correlation Id a| String |  |  | 
| Content Type a| String |  |  | 
| Config Ref a| ConfigurationProvider |  Name of the configuration to use to execute this component. |  | x
| Partition Id a| String |  |  | 
| Partition Key a| String |  |  | 
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  | 
|===


=== For Configurations

* <<AzureEventhubs>> 

=== Throws

* AZURE-EVENTHUBS:AEH_ERROR 
* AZURE-EVENTHUBS:AUTHENTICATION 
* AZURE-EVENTHUBS:CONNECTIVITY 
* AZURE-EVENTHUBS:INVALID_INPUT 
* AZURE-EVENTHUBS:RETRY_EXHAUSTED 


== Sources

[[PartitionListener]]
== Partition Listener
`<azure-eventhubs:partition-listener>`


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Partition Id a| String |  |  | x
| Consumer Group a| String |  The Consumer Group you want to belong to. |  | 
| Event Position Type a| One of:

* <<OffSet>>
* <<Earliest>>
* <<Latest>>
* <<Sequence>>
* <<EnqueuedTime>> |  |  | 
| Output Mime Type a| String |  The mime type of the payload that this operation outputs. |  | 
| Output Encoding a| String |  The encoding of the payload that this operation outputs. |  | 
| Config Ref a| ConfigurationProvider |  Name of the configuration to use to execute this component. |  | x
| Primary Node Only a| Boolean |  Determines whether to execute this source on only the primary node when running Mule instances in a cluster. |  true | 
| On Capacity Overload a| Enumeration, one of:

** DROP
** WAIT |  Strategy that Mule will apply when the flow receives more messages than it has the capacity to handle |  DROP | 
| Streaming Strategy a| * <<RepeatableInMemoryStream>>
* <<RepeatableFileStoreStream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  | 
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  | 
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  | 
|===

=== Output

[%autowidth.spread]
|===
|Type |Any
| Attributes Type a| <<EventAttributes>>
|===

=== For Configurations

* <<AzureEventhubs>> 



[[EventhubListener]]
== Eventhub Listener
`<azure-eventhubs:eventhub-listener>`


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Consumer Group a| String |  The Consumer Group you want to belong to. |  | 
| Checkpoint Frequency a| Number |  The frequency of updating the checkpoint. For instance, every 1000 events received. |  | 
| Output Mime Type a| String |  The mime type of the payload that this operation outputs. |  | 
| Output Encoding a| String |  The encoding of the payload that this operation outputs. |  | 
| Config Ref a| ConfigurationProvider |  Name of the configuration to use to execute this component. |  | x
| Primary Node Only a| Boolean |  Determines whether to execute this source on only the primary node when running Mule instances in a cluster. |  | 
| On Capacity Overload a| Enumeration, one of:

** DROP
** WAIT |  Strategy that Mule will apply when the flow receives more messages than it has the capacity to handle |  DROP | 
| Streaming Strategy a| * <<RepeatableInMemoryStream>>
* <<RepeatableFileStoreStream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  | 
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  | 
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  | 
|===

=== Output

[%autowidth.spread]
|===
|Type |Any
| Attributes Type a| <<EventAttributes>>
|===

=== For Configurations

* <<AzureEventhubs>> 



== Types
[[TokenCredentialProperties]]
=== Token Credential Properties

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Tenant Id a| String |  |  | 
| Client Id a| String |  |  | 
| Client Secret a| String |  |  | 
|===

=== Reconnection

Configures a reconnection strategy for an operation.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  | 
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> | Reconnection strategy to use. |  | 
|===

=== Reconnect

Configures a standard reconnection strategy, which specifies how often to reconnect and how many reconnection attempts the connector source or operation can make.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  | 
| Blocking a| Boolean | If `false`, the reconnection strategy runs in a separate, non-blocking thread. |  | 
| Count a| Number | How many reconnection attempts the Mule app can make. |  | 
|===

=== Reconnect Forever

Configures a forever reconnection strategy by which the connector source or operation attempts to reconnect at a specified frequency for as long as the Mule app runs.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  | 
| Blocking a| Boolean | If `false`, the reconnection strategy runs in a separate, non-blocking thread. |  | 
|===

[[ExpirationPolicy]]
=== Expiration Policy

Configures an expiration policy strategy.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | Configures the maximum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. |  | 
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | Time unit for the *Max Idle Time* field. |  | 
|===

[[EventAttributes]]
=== Event Attributes

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Content Type a| String |  |  | 
| Correlation Id a| String |  |  | 
| Enqueued Time a| DateTime |  |  | 
| Message Id a| String |  |  | 
| Metadata a| Object |  |  | 
| Offset a| Number |  |  | 
| Sequence Number a| Number |  |  | 
|===

[[RepeatableInMemoryStream]]
=== Repeatable In Memory Stream

Configures the in-memory streaming strategy by which the request fails if the data exceeds the MAX buffer size. Always run performance tests to find the optimal buffer size for your specific use case.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | Initial amount of memory to allocate to the data stream. If the streamed data exceeds this value, the buffer expands by *Buffer Size Increment*, with an upper limit of *Max In Memory Size value*. |  | 
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised when the buffer gets full. |  | 
| Max Buffer Size a| Number | Maximum size of the buffer. If the buffer size exceeds this value, Mule raises a `STREAM_MAXIMUM_SIZE_EXCEEDED` error. A value of less than or equal to `0` means no limit. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the *Initial Buffer Size*, *Buffer Size Increment*, and *Buffer Unit* fields. |  | 
|===

[[RepeatableFileStoreStream]]
=== Repeatable File Store Stream

Configures the repeatable file-store streaming strategy by which Mule keeps a portion of the stream content in memory. If the stream content is larger than the configured buffer size, Mule backs up the buffer's content to disk and then clears the memory.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Size a| Number | Maximum amount of memory that the stream can use for data. If the amount of memory exceeds this value, Mule buffers the content to disk. To optimize performance:

* Configure a larger buffer size to avoid the number of times Mule needs to write the buffer on disk. This increases performance, but it also limits the number of concurrent requests your application can process, because it requires additional memory.

* Configure a smaller buffer size to decrease memory load at the expense of response time. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the *In Memory Size* field. |  | 
|===

=== Redelivery Policy

Configures the redelivery policy for executing requests that generate errors. You can add a redelivery policy to any source in a flow.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | Maximum number of times that a redelivered request can be processed unsuccessfully before returning a REDELIVERY_EXHAUSTED error. |  | 
| Message Digest Algorithm a| String | Secure hashing algorithm to use if the *Use Secure Hash* field is `true`. If the payload of the message is a Java object, Mule ignores this value and returns the value that the payload's `hashCode()` returned. |  | 
| Message Identifier a| <<RedeliveryPolicyMessageIdentifier>> | One or more expressions that determine if a message was redelivered. This property can be set only if the *Use Secure Hash* field is `false`. |  | 
| Object Store a| ObjectStore | Configures the object store that stores the redelivery counter for each message. |  | 
|===

=== Redelivery Policy Message Identifier

Configures how to identify a redelivered message and how to find out when the message was redelivered.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Use Secure Hash a| Boolean | If `true`, Mule uses a secure hash algorithm to identify a redelivered message. |  | 
| Id Expression a| String | One or more expressions that determine when a message was redelivered. You can set this property only if the *Use Secure Hash* field is `false`. |  | 
|===

[[Event]]
=== Event

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Body a| String |  |  | 
| Metadata a| Object |  |  | 
|===

[[OffSet]]
=== Off Set

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Offset a| Number |  |  | x
|===

[[Sequence]]
=== Sequence

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Sequence a| Number |  |  | x
|===

[[EnqueuedTime]]
=== Enqueued Time

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Instant a| String |  |  | x
|===

[[AzureBlobStorageSasAuthentication]]
=== Azure Blob Storage SAS Authentication

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Container Name a| String |  |  | x
| Account Name a| String |  |  | x
| Account Key a| String |  |  | x
|===

[[AzureBlobStorageActiveDirectoryAuthentication]]
=== Azure Blob Storage Active Directory Authentication

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Token Credential Properties a| <<TokenCredentialProperties>> |  |  | 
| Use Azure Default Credential a| Boolean |  | false | 
| Container Name a| String |  |  | x
| Account Name a| String |  |  | x
| Authority Host a| String |  |  | 
|===

[[SasAuthentication]]
=== SAS Authentication

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Namespace a| String |  |  | x
| Shared Access Key Name a| String |  |  | x
| Shared Access Key a| String |  |  | x
| Event Hub Name a| String |  |  | x
| Share Connection a| Boolean |  | false | 
| Checkpoint Store Type a| One of:

* <<AzureBlobStorageSasAuthentication>>
* <<AzureBlobStorageActiveDirectoryAuthentication>> |  |  | 
|===

[[ActiveDirectoryAuthentication]]
=== Active Directory Authentication

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Token Credential Properties a| <<TokenCredentialProperties>> |  |  | 
| Use Azure Default Credential a| Boolean |  | false | 
| Namespace a| String |  |  | x
| Azure Endpoint a| String |  | servicebus.windows.net | 
| Authority Host a| String |  |  | 
| Event Hub Name a| String |  |  | x
| Share Connection a| Boolean |  | false | 
| Checkpoint Store Type a| One of:

* <<AzureBlobStorageSasAuthentication>>
* <<AzureBlobStorageActiveDirectoryAuthentication>> |  |  | 
|===
