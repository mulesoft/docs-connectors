= Upgrade to NetSuite 11.x - Mule 4
:page-aliases: connectors::netsuite/netsuite-connector-upgrade-migrate.adoc

Upgrade NetSuite Connector to version 11.x to use the new features.

== Supported Upgrade Paths

[%header,cols="50a,50a"]
|===
|From Version | To Version
|10.x |11.x
|===

== Changes in This Release

In the v10.x versions of NetSuite Connector, the connector resolved metadata by receiving Java objects as input and converting them internally to XML so that NetSuite could understand them. In the 11.x version, NetSuite Connector resolves metadata by receiving the XML input directly. The same happens with the output of the operations: now they all return the XML returned by NetSuite, without being modified by the connector.

Because of these modifications, the input and output metadata for many connector operations has changed. The metadata now appears as a set of XML fields.

The Reference Guide...

In the graphical view of DataWeave, you can generate the necessary input/output transformations by dragging and dropping the fields in the UI. Their corresponding Namespaces and tags necessary for the XML will be completed automatically.

== Changes to the Async Operations

All async operations now return an asynGetListResponse XML object that contains  the job ID, status, percent completed, and estimated duration of the request.

Other changes to the async operations include the following:

[%header%autowidth.spread]
|===
| Operation |Changes
| Async Add List | Removed the Record Type and Records fields. You now specify the associated values in the message field of the input metadata.
| Async Delete List | Removed the Deleted Base Ref Types field. You now specify the associated values in the message field of the input metadata.
| Async Delete List Records | Removed this operation. For equivalent functionality, use the Async Delete List operation and specify the recordRef or baseRefType in the XML message field of the input metadata.
| Async Get List | Removed the Retrieved Base Ref Types field. You now specify the associated values in the message field of the input metadata.
| Async Get List Records | Removed this operation. For equivalent functionality, use the Get List operation and specify `FILE` as the record type in the XML message attribute.
| Async Initialize List | Removed the Initialize Records field. You now specify the associated values in the message field of the input metadata.
| Async Search | Removed the Search Record and Criteria fields. You now specify the associated values in the message field of the input metadata.
| Async Update List | Removed the Record Type and Records fields. You now specify the associated values in the message field of the input metadata.
| Async Upsert List | Removed the Record Type and Records fields. You now specify the associated values in the message field of the input metadata.
| Check Async Status | No changes.
|===

== Invitee operations

Changes to the invitee operations include the following:

[%header%autowidth.spread]
|===
| Operation |Changes
| Update Invitee Status | Removed the Event ID and Status fields. You now specify these values in the message field of the input metadata.
| Update Invitee Status List | Removed the Record Type and Invitee Statuses fields. You now specify these values in the message field of the input metadata.
|===

== Item Operations

Changes to the item operations include the following:

[%header%autowidth.spread]
|===
| Operation |Changes
| Get Current Rate | Removed the Rate Filter field. You now specify this value in the message field of the input metadata.
| Get Item Availability | Removed the Record and If Modified Since fields. You now specify these values in the message field of the input metadata.
| Get Posting Transaction Summary
a| *Removed the Fields, Filters, and Page Index fields. You now specify these values in the message field of the input metadata.
* The operation now returns a getPostingTransactionSummaryResult object in the output metadata.

|===

== Record Operations

Changes to record operations include the following:

[%header%autowidth.spread]
|===
| Operation |Changes
| Add File | Removed this operation. For equivalent functionality, use the Add Record operation and specify `FILE` as the record type in the XML message attribute.
| Add List a|
* Removed the Record Maps field. You now specify this value in the message field of the input metadata.
* Changed what is returned. The operation now returns an AddListResponse XML object containing a writeResponseList containing the WriteResponse for each item in the list.

| Add Record a|
* Removed the Attributes field. You now specify the associated values in the message field of the input metadata.
* Changed what is returned. The operation now returns an addResponse XML object that contains the response for the added item.
| Add Record Objects a| Removed this operation. For equivalent functionality, use the Add Record operation.
| Attach Record |
Removed all of the general fields. You now specify the associated values in the message field of the input metatada.
| Delete | Removed the Base Ref field. You now specify the associated values in the message field of the input metatada.
| Delete List | Removed the Deleted Base Ref Types field. You now specify the
 associated values in the message field of the input metatada.
| Delete Record | Removed this operation. For equivalent functionality, use the Delete operation.
| Delete Records List | Removed this operation. For equivalent functionality, use the Delete List operation.
| Detach Record | Removed the Source and Destination fields. You now specify the associated values in the message field of the input metatada.
| Get | No changes
| Get Custom Record | Removed this operation. For equivalent functionality, use the Get operation.
| Get Deleted Records | Removed all of the general fields. You now specify the associated values in the message field of the input metatada.
| Get List | Removed all of the general fields. You now specify the associated values in the message field of the input metatada.
| Get Record | Removed this operation. For equivalent functionality, use the Get operation.
| Get Records | No changes
| Get Select Value | Removed all of the general fields. You now specify the associated values in the message field of the input metatada.
| Get Saved Search | Renamed the Record Type field to Search Type.
| Initialize | Removed the Record to Initialize field. You now specify the associated values in the message field of the input metatada.
| Initialize List | Removed all of the general fields. You now specify the associated values in the message field of the input metatada.
| Search | Removed the Key and Search Record fields. You now specify the associated values in the message field of the input metatada.
| Update List | Removed the Record Maps field. You now specify the associated values in the message field of the input metatada.
| Update Record | Removed the Attributes field. You now specify the associated values in the message field of the input metatada.
| Update Records List | Removed this operation. For equivalent functionality, use the Update List operation.
|Upsert List | Removed the Record Maps field. You now specify the associated values in the message field of the input metatada.
| Upsert Record | Renamed the operation to Upsert and removed the Attributes field. You now specify the associated values in the message field of the input metatada.
|===








== Upgrade Steps

If you are upgrading from an earlier version of the connector, you can click the `Updates Available` pop-up message in the bottom right corner of Anypoint Studio and follow the prompts.

You can also follow these steps to perform the upgrade:

. In Anypoint Studio, create a Mule project.
. In *Mule Palette*, click *Search in Exchange*.
. In *Add Dependencies to Project*, enter `netsuite` in the search field.
. In *Available modules*, select *NetSuite* and click *Add*. +
Studio upgrades the connector automatically.
. Click *Finish*.
. In the `pom.xml` file for the Mule project, verify that the NetSuite Connector dependency version is `10.0.0`.

== Post Upgrade Tasks

* Ensure that your configurations use either *Request Based* or *Token* authentication.
* Verify that your error handling is updated to work with the minor changes in error codes in this version of the connector.
* Refer to <<changed_operations,Changed Operations>> and <<changed_sources,Changed Sources>> for updated operations and sources. +
If your integration uses any of the affected operations and sources, make the necessary changes to comply with the new interfaces.
* Because the package of the exposed classes was changed to `com.mulesoft.connector.netsuite.extension.api`, you must update all DataWeave mappings that create objects for operation inputs. +
You must also update mappings that transform object outputs.

== Verify the Upgrade

After you install the latest version of the connector, verify the upgrade:

. In Studio, verify that there are no errors in the *Problems* or *Console* views.
. Verify that there are no problems in the project `pom.xml` file.
. Test the connection to verify that the operations work.

== Revert the Upgrade

If you must revert to your previous version of NetSuite Connector, change the `mule-netsuite-connector` dependency version `10.0.0` in the projectâ€™s `pom.xml` to the previous version.
Additionally, revert any changes made in the operations to their previous state.

== See Also

https://help.mulesoft.com[MuleSoft Help Center]
