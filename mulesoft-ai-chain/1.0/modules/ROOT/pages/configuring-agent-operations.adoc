= Configuring Agent Operations


[[agent-operations]]
== Agent Define Prompt

The *Agent define prompt template* operation is essential for using specific prompt templates with your LLMs. This operation helps you define and compose AI functions using plain text. This enables the creation of natural language prompts, generating responses, extracting information, invoking other prompts, or performing any text-based task.

=== Configure the Agent Define Prompt

To configure the *Agent define prompt* operation:

. In the *General* properties tab for the operation, enter the following information:
* Dataset
+
Specify the dataset for the LLM to evaluate using the provided template and instructions.
* Template
+
Enter the prompt template for the operation.
* Instructions
+
Provide the instructions for the LLM, outlining the goals of the task.
+
This is the XML for this operation:
+
[source,xml,linenums, subs=attributes+]
----
<ms-chainai:agent-define-prompt-template 
  doc:name="Agent define prompt template" 
  doc:id="f1c29c39-eac9-468c-9c46-4109a66303ec" 
  config-ref="MuleChain_AI_Llm_configuration" 
  template="#[payload.template]" 
  instructions="#[payload.instructions]" 
  dataset="#[payload.dataset]"
/>
----

=== Output Configuration

This operation responds with a JSON payload containing the main LLM response. Additionally, attributes such as token usage are included as part of the metadata (attributes) but not within the main payload.

This is an example response:

[source,json]
----
{
  "response": "{\n  \"type\": \"positive\",\n  \"response\": \"Thank you for your positive feedback on the training last week. We are glad to hear that you had a great experience. Have a nice day!\"\n}"
}
----

The operation also returns attributes that aren't within the main JSON payload, which include information about token usage, for example:

[source,json]
----
{
  "tokenUsage": {
      "outputCount": 9,
      "totalCount": 18,
      "inputCount": 9
  },
  "additionalAttributes": {}
}
----

\\annotate the code
tokenUsage: The token usage metadata returned as attributes.
outputCount: The number of tokens used to generate the output.
totalCount: The total number of tokens used for input and output.
inputCount: The number of tokens used to process the input.

== Example Use Cases

* Customer Service Agents
+
Enhance customer service by providing case summaries, case classifications, summarizing large datasets, and more.
* Sales Operation Agents
+
Assist sales teams in writing sales emails, summarizing cases for specific accounts, assessing the probability of closing deals, and more.
* Marketing Agents
+
Support marketing teams in generating product descriptions, creating newsletters, planning social media campaigns, and more.


== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* xref:mulesoft-ai-chain-connector-reference.adoc[]
* https://help.mulesoft.com[MuleSoft Help Center]
