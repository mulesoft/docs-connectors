= Azure Event Hubs Messaging Connector 1.0 Reference



== Configurations
---
[[Config]]
=== Config


Default configuration


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
|Name | String | Name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| <<Config_Connection, Connection>>
 | Connection types for this configuration. | | x
| Name a| String |  ID used to reference this configuration. |  | x
| Expiration Policy a| <<ExpirationPolicy>> | Configures the minimum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. |  |
|===

==== Connection Types
[[Config_Connection]]
===== Connection


====== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Namespace a| String |  Namespace that exists in the Azure Event Hubs subscription. |  | x
| Shared Access Key Name a| String |  Name of the shared access key. |  | x
| Shared Access Key a| String |  Shared access key. |  | x
| Read Timeout a| Number |  Amount of time that the client waits for a response before timing out. `0` specifies that the client waits indefinitely. |  60000 |
| Read Timeout Unit a| Enumeration, one of:
** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS |  Time unit for the *Read Timeout* field. |  SECONDS |
| Connection Timeout a| Number |  Amount of time that the client attempts to establish a connection before timing out. `0` specifies that the client continues to attempt to open a connection indefinitely. |  60 |
| Connection Timeout Unit a| Enumeration, one of:
** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS |  Time unit for the *Connection Timeout* field. |  SECONDS |
| Host a| String | Hostname or IP address of the proxy server. |  |
| Port a| Number | Port of the proxy server. |  |
| Username a| String | Username to authenticate against the proxy server. |  |
| Password a| String | Password to authenticate against the proxy server. |  |
| Non proxied hosts a| String |  Comma-separated list of hosts that the proxy must not be used against. |  |
| Reconnection a| <<Reconnection>> a|  What to do if, when an app is deployed, a connectivity test does not pass after exhausting the associated reconnection strategy:

* `true`
+
Allow the deployment to fail.

* `false`
+
Ignore the results of the connectivity test. |  |
|===

== Supported Operations
* <<RetrieveEvent>>
* <<SendEvent>>
* <<SendEventsBatch>>

== Associated Sources
* <<EventListener>>



[[RetrieveEvent]]
== Retrieve Event
`<azure-event-hubs-messaging:retrieve-event>`


Retrieves an event from a specific event hub, consumer group, and partition.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Event Hubs Position a| Enumeration, one of:

** EARLIEST
** LATEST
** OFFSET
** SEQUENCE |  Event Hubs position. |  EARLIEST |
| Offset Or Sequence a| Number | Defines the offset or the sequence number, depending on the type of EventHubsPosition selected, from which to receive the events. |  |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Config Ref a| ConfigurationProvider |  Name of the configuration used to execute this component. |  | x
| Streaming Strategy a| * <<RepeatableInMemoryStream>>
* <<RepeatableFileStoreStream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Event Hub a| String |  Event Hub name. |  | x
| Consumer Group a| String |  Consumer group name. |  | x
| Partition Id a| String |  Partition ID. |  | x
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation's output. The outcome of the expression is stored in the *Target Variable* field. |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| <<EventAttributes>>
|===

=== For Configurations

* <<Config>>

=== Throws

* MULE:ANY
* AZURE-EVENT-HUBS-MESSAGING:CONNECTIVITY
* AZURE-EVENT-HUBS-MESSAGING:DESTINATION_NOT_FOUND
* AZURE-EVENT-HUBS-MESSAGING:INVALID_PARAMS
* AZURE-EVENT-HUBS-MESSAGING:INVALID_SIGNATURE
* AZURE-EVENT-HUBS-MESSAGING:OPERATION_TIMEOUT
* AZURE-EVENT-HUBS-MESSAGING:RETRY_EXHAUSTED


[[SendEvent]]
== Send a single event
`<azure-event-hubs-messaging:send-event>`

Sends a single event to a specific Event Hub.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Event Data a| Binary |  Content of the event. |  #[payload] |
| Message Id a| String |  Message ID. |  |
| Correlation Id a| String |  Correlation ID. |  |
| Config Ref a| ConfigurationProvider |  Name of the configuration used to execute this component. |  | x
| Event Hub a| String |  Event Hub name. |  | x
| Partition Id a| String |  Partition ID. |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  |
|===

=== For Configurations

* <<Config>>

=== Throws

* MULE:ANY
* AZURE-EVENT-HUBS-MESSAGING:CONNECTIVITY
* AZURE-EVENT-HUBS-MESSAGING:DESTINATION_NOT_FOUND
* AZURE-EVENT-HUBS-MESSAGING:INVALID_PARAMS
* AZURE-EVENT-HUBS-MESSAGING:INVALID_SIGNATURE
* AZURE-EVENT-HUBS-MESSAGING:OPERATION_TIMEOUT
* AZURE-EVENT-HUBS-MESSAGING:RETRY_EXHAUSTED


[[SendEventsBatch]]
== Send a batch of events
`<azure-event-hubs-messaging:send-events-batch>`

Sends a batch of events to a specific Event Hub.

=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Events Data a| Array of Any |  Content of the event. |  #[payload] |
| Config Ref a| ConfigurationProvider |  Name of the configuration used to execute this component. |  | x
| Event Hub a| String |  Event Hub name. |  | x
| Partition Id a| String |  Partition ID. |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  |
|===

=== For Configurations

* <<Config>>

=== Throws

* MULE:ANY
* AZURE-EVENT-HUBS-MESSAGING:CONNECTIVITY
* AZURE-EVENT-HUBS-MESSAGING:DESTINATION_NOT_FOUND
* AZURE-EVENT-HUBS-MESSAGING:INVALID_PARAMS
* AZURE-EVENT-HUBS-MESSAGING:INVALID_SIGNATURE
* AZURE-EVENT-HUBS-MESSAGING:OPERATION_TIMEOUT
* AZURE-EVENT-HUBS-MESSAGING:RETRY_EXHAUSTED


== Sources

[[EventListener]]
== Event Listener
`<azure-event-hubs-messaging:event-listener>`

Receives messages from a specific consumer group.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Event Hubs Position a| Enumeration, one of:

** EARLIEST
** LATEST
** OFFSET
** SEQUENCE | Event Hubs position. |  LATEST |
| Offset Or Sequence a| Number | Defines the offset or the sequence number, depending on the type of EventHubsPosition selected, from which to receive the events. |  |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Config Ref a| ConfigurationProvider |  Name of the configuration used to execute this component. |  | x
| Primary Node Only a| Boolean |  Determines whether to execute this source on only the primary node when running Mule instances in a cluster. |  true |
| Streaming Strategy a| * <<RepeatableInMemoryStream>>
* <<RepeatableFileStoreStream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  |
| Event Hub a| String |  Event Hub name. |  | x
| Consumer Group a| String |  Consumer group name. |  | x
| Partition Id a| String |  Partition ID. |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  Retry strategy in case of connectivity errors. |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |Any
| Attributes Type a| <<EventAttributes>>
|===

=== For Configurations

* <<Config>>



== Types

=== Reconnection

Configures a reconnection strategy for an operation.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean a| What to do if, when an app is deployed, a connectivity test does not pass after exhausting the associated reconnection strategy:

* `true`
+
Allow the deployment to fail.

* `false`
+
Ignore the results of the connectivity test. |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> | Reconnection strategy to use. |  |
|===

=== Reconnect

Configures a standard reconnection strategy, which specifies how often to reconnect and how many reconnection attempts the connector source or operation can make.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  |
| Blocking a| Boolean | If `false`, the reconnection strategy runs in a separate, non-blocking thread. |  |
| Count a| Number | How many reconnection attempts the Mule app can make. |  |
|===

=== Reconnect Forever

Configures a forever reconnection strategy by which the connector source or operation attempts to reconnect at a specified frequency for as long as the Mule app runs.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  |
| Blocking a| Boolean | If `false`, the reconnection strategy runs in a separate, non-blocking thread. |  |
|===

[[ExpirationPolicy]]
=== Expiration Policy

Configures an expiration policy strategy.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | Configures the maximum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. |  |
| Time Unit a| Enumeration, one of:
** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | Time unit for the *Max Idle Time* field. |  |
|===

[[EventAttributes]]
=== Event Attributes

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Content Type a| String |  |  |
| Correlation Id a| String |  |  |
| Enqueued Time a| DateTime |  |  |
| Message Id a| String |  |  |
| Offset a| Number |  |  |
| Sequence Number a| Number |  |  |
|===

[[RepeatableInMemoryStream]]
=== Repeatable In Memory Stream

Configures the in-memory streaming strategy by which the request fails if the data exceeds the MAX buffer size. Always run performance tests to find the optimal buffer size for your specific use case.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | Initial amount of memory to allocate to the data stream. If the streamed data exceeds this value, the buffer expands by *Buffer Size Increment*, with an upper limit of *Max In Memory Size* value. |  |
| Buffer Size Increment a| Number | Amount by which the buffer size expands if it exceeds its initial size. Setting a value of `0` or lower specifies that the buffer can’t expand. |  |
| Max Buffer Size a| Number | The maximum amount of memory to use. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised. A value lower than or equal to zero means no limit. |  |
| Buffer Unit a| Enumeration, one of:
** BYTE
** KB
** MB
** GB | Unit for the *Initial Buffer Size*, *Buffer Size Increment*, and *Buffer Unit* fields. |  |
|===

[[RepeatableFileStoreStream]]
=== Repeatable File Store Stream

Configures the repeatable file-store streaming strategy by which Mule keeps a portion of the stream content in memory. If the stream content is larger than the configured buffer size, Mule backs up the buffer’s content to disk and then clears the memory.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Size a| Number a| Maximum amount of memory that the stream can use for data. If the amount of memory exceeds this value, Mule buffers the content to disk. To optimize performance:

* Configure a larger buffer size to avoid the number of times Mule needs to write the buffer on disk. This increases performance, but it also limits the number of concurrent requests your application can process, because it requires additional memory.

* Configure a smaller buffer size to decrease memory load at the expense of response time. |  |
| Buffer Unit a| Enumeration, one of:
** BYTE
** KB
** MB
** GB | Unit for the *In Memory Size* field. |  |
|===

=== Redelivery Policy

Configures the redelivery policy for executing requests that generate errors. You can add a redelivery policy to any source in a flow.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | Maximum number of times that a redelivered request can be processed unsuccessfully before returning a REDELIVERY_EXHAUSTED error. |  |
| Message Digest Algorithm a| String | Secure hashing algorithm to use if the *Use Secure Hash* field is `true`. If the payload of the message is a Java object, Mule ignores this value and returns the value that the payload's `hashCode()` returned. |  |
| Message Identifier a| <<RedeliveryPolicyMessageIdentifier>> | One or more expressions that determine if a message was redelivered. This property can be set only if the *Use Secure Hash* field is `false`. |  |
| Object Store a| ObjectStore | Configures the object store that stores the redelivery counter for each message. |  |
|===

=== Redelivery Policy Message Identifier

Configures how to identify a redelivered message and how to find out when the message was redelivered.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Use Secure Hash a| Boolean | If `true`, Mule uses a secure hash algorithm to identify a redelivered message. |  |
| Id Expression a| String | One or more expressions that determine when a message was redelivered. You can set this property only if the *Use Secure Hash* field is `false`. |  |
|===

== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
