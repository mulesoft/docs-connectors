= SAML module generate security assertion - Mule 4
:page-aliases: connectors::saml/generate-saml-20-assertion.adoc

The mule SAML module can be use to create a SAML 2.0 assertion.

== Global configuration

To create the SAML assertions you need to creat a global configuration with at lest the issuer of the assertions.

Here is a simple configuration example with all its parameters configured:

[source,xml,linenums]
----
<saml:generation-config name="SAML_Generation_config" issuer="Mulesoft" skewTime="60">
    <saml:signature signatureAlgorithm="RSAwithSHA256">
        <saml:keystore path="keystore.jceks" type="JCEKS" password="yourPassword" alias="anAlias" keyPassword="yourKeyPassword" />
        <saml:key-information addIssuerSerial="true" />
    </saml:signature>
    <saml:namespace-directory >
        <saml:namespaces >
            <saml:namespace prefix="soapenv" uri="http://schemas.xmlsoap.org/soap/envelope/" />
            <saml:namespace prefix="soap12" uri="http://schemas.xmlsoap.org/wsdl/soap12/" />
            <saml:namespace prefix="wsse" uri="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" />
        </saml:namespaces>
    </saml:namespace-directory>
</saml:generation-config>
----


== Operation configuration

The operation to generate SAML assertions is highly configurable so it can be tailored to produce any 2.0 SAML assertion
that can be read by any well designed system. In the following paragraphs we describe all the parameters that can be
configure configured to produce the desired output.

=== Content

The content is the XML document where the SAML assertion will be added. This parameter is always an XML application
specific element.

The content element accepts embedded DataWeave scripts as values so that you can construct the XML document without
having a side effect on the message or having to use multiple components to create it. By default, the value of the
content is #[payload].

=== Element path

The element path is an XPath expression that indicates the xml node of the content where SAML assertion will be placed.

=== Action

The action parameter specifies how the assertion will be added to the content. Possible values are replace, to overwrite
the node configured in the path element, or prepend, to insert the assertion as the first child node of the node
configured in the path element.

=== Subject

The subject parameter identifies the principal that needs to be authenticated. It is possible to configure the subject
on a global configuration, in line for each operation and using a DataWeave expression.

==== Confirmation method

The confirmation method specifies how the service that wants to rely on the assertion can confirm that the principal
being authenticated  is the subject referenced in the assertion.

==== Name Id

The name Id is a direct way to identifies the subject of the SAML assertion. It represents the element <NameID>  defined
in the Assertions and Protocol for the OASIS Security Assertion Markup Language (SAML) specification.

==== Subject certificate

This is the certificate of the subject being authenticated.

==== Subject confirmation data

The Subject confirmation data parameter corresponds to the <SubjectConfirmationData> element that is defined in the
Assertions and Protocol for the OASIS Security Assertion Markup Language (SAML) specification.

==== Subject confirmation name id

The subject confirmation name id identifies the entity expected to satisfy the subject confirmation requirements. It
corresponds to the <NameID> element that is defined in the Assertions and  Protocol for the OASIS Security Assertion
Markup Language (SAML) specification.

=== Conditions

The condition parameter specifies the the conditions under which the assertion is to be considered valid. It represents
the <Conditions> element hat is defined in the  Assertions and Protocol for the OASIS Security Assertion Markup
Language (SAML) specification.

==== Assertion Validity

The assertion validity let you to configure how much time the assertion will be valid.

==== Assertion validity time unit

The assertion validity time unit lets you to configure the time unit to represent the assertion validity.

==== Skew time

The skew time let you to configure how long before the assertion creation the assertion is valid.

==== Skew time unit

The skew time unit lets you to configure the time unit to represent the skew time.

==== One time use

The one time use parameter let you to indicate that assertions are meant to be used only once. It represents the
<OneTimeUse> element that is defined in the  Assertions and Protocol for the OASIS Security Assertion Markup  Language
(SAML) specification.

==== Audience restrictions

The audience restrictions let you state the valid parties for the assertions, it represents the <AudienceRestriction>
element with its <Audience> child element that is  defined in the  Assertions and Protocol for the OASIS Security
Assertion Markup  Language  (SAML) specification.

==== Proxy restrictions

The proxy restrictions specifies limitations to relying parties that wish to act as asserting  parties and issue
subsequent assertions of their own, it represents the <ProxyRestriction> and its child element <Audience> that is
defined in the  Assertions and Protocol for the OASIS Security  Assertion Markup  Language  (SAML) specification.

== Statements configuration

=== Authentication statements

Authentication statements assert to the service provider that the principal has been authenticated with the identity
provider using the configured authentication method. It represents the <AuthnStatement> element that is  defined in the
Assertions and Protocol for the OASIS Security  Assertion Markup  Language  (SAML) specification.

=== Attribute statements

An attribute statement asserts that a principal is associated with certain attributes. An attribute is simply a
name-value pair. It represents the <AttributeStatement> element that is  defined in the  Assertions and Protocol for the
OASIS Security  Assertion Markup  Language  (SAML) specification.

== See Also

* xref:generate-saml-20-assertion-example.adoc[Generate assertion example]