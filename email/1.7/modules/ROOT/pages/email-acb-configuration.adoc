////
Set connector-specific values for the following variables:

* {exchange-search-name} - Lower case term used to find the connector in Exchange. For example, redis.
* {connector-name} - Name of the connector without the word "Connector." For example, Redis.
* {version} - Connector version. For example, 1.0.
* {lc-connector-name} - Lower case connector name to use in the links in the Next Steps and See Also sections. For example, redis.
* {studio-connector-name} - Name of the connector as it appears in the Available modules section in the Studio Add Dependencies to Project window. For example, NetSuite Connector - Mule 4.
////

:exchange-search-name: <email>
:connector-name: <Email>
:version: <value>
:lc-connector-name: <email>
:studio-connector-name: <Email Connector - Mule 4>

// Comment out the next line if the connector does not use TLS.
:tls:

// Remove comments from the next line if the connector has an Additional Configuration topic
//:additional-config:

= Using Anypoint Code Builder to Configure Database Connector - Mule 4

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-connector-config-intro"]

== Creating a New Integration Project

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-create-integration-project"]

== Adding the Connector to Your Integration Project

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-add-connector-to-project"]

== Configuring Trigger

[[configuring-trigger]]
== Configuring the Trigger For the Flow

A trigger (source) initiates a flow when a specified condition is met.

You can configure one of these triggers to use with Email Connector:

* *On New Email - IMAP* +
Initiates a flow by retrieving all the emails from an IMAP mailbox folder, watermark can be enabled for polled items
* *On New Email - POP3* +
Initiates a flow by retrieving all the emails from an POP3 mailbox folder
* *HTTP > Listener* +
Initiates a flow each time it receives a request on the configured host and port
* *Scheduler* +
Initiates a flow when a time-based condition is met
+
See xref:anypoint-code-builder::acb-component-scheduler.adoc[].

For example, to configure the *On New Email -IMAP* source:

. Add the *On New Email - POP3* component to the canvas.
. Click the *On New Email - POP3* component on the canvas. 
. On the *General* tab, configure the following attributes:
+
[%header%autowidth.spread]
|===
| Attribute | Description | Required
| Folder | Email folder that receives the sent email. | No
|Delete after retrieve a| If selected, retrieved emails are deleted after the operation completes. Deleting processed emails ensures that the next processed emails are new ones. The *Delete after retrieve* attribute is commonly used with the POP3 protocol because it doesn't support watermarking. | No
|Pop 3 matcher a| Custom matchers that enables filtering dispatched messages. Each source matcher can filter emails by dates, addresses, subject, flags, and so on. This attribute is not currently enabled in the configuration UI. Configure it in the XML editor, for example:

[source, xml, linenums]
----
<flow name="OnNewEmail-IMAP">
    <email:listener-imap config-ref="Email_IMAP">
        <scheduling-strategy>
            <fixed-frequency/>
        </scheduling-strategy>
        <email:imap-matcher subjectRegex="IMPORTANT"/>
    </email:listener-imap>
</flow>
----
| No
|Scheduling strategy a| Triggers the flow's execution based on a time-based condition. This field is not currently enabled in the configuration UI. Configure it in the XML editor. See <<scheduling-strategy>>. | Yes
|===
. Click the *Advanced* tab to configure the following attributes:
+
[%header%autowidth.spread]
|===
| Attribute | Description | Required
| Primary node only |Select this option to execute the *On New Email - POP3* trigger only on the primary node when the app is running in a cluster. | No
| Redelivery policy | | Redelivery policy | This attribute is not currently enabled in the configuration UI. Configure it in the XML editor. See xref:email-documentation.adoc#RedeliveryPolicy[Redelivery Policy]. | No




|===














[[scheduling-strategy]]
== Configuring the Scheduling Strategy in XML

include::connectors::partial$acb-xml-examples.adoc[tag="db-scheduling-strategy"]
