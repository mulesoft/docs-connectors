= MongoDB Connector Reference
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Support Category: Select

MongoDB Connector v5.3

+++
MongoDB is an open source, high-performance, schema-free, document-oriented database that manages collections of BSON documents.
+++


== Configurations
---
[[config]]
=== Config


=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<config_connection, Connection>>
* <<config_connection-string, Connection String>>
 | The connection types that can be provided to this configuration. | | x
| Expiration Policy a| <<ExpirationPolicy>> |  +++Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform will expire the instance at the exact moment that it becomes eligible. The runtime actually purges the instances when it sees fit.+++ |  |
| Enable Metadata a| Boolean |  +++collectionMetadataSamples: Stores templates to build metadata based on the document parameters `union Key (String): Collection Name`. `List<String>:` List of ObjectIDs documents in a collection.+++ |  +++true+++ |
| Collection Metadata samples a| Object |  |  |
|===

==== Connection Types
[[config_connection]]
===== Connection


===== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Servers (host:port) a| String a|  A list of MongoDB instance, with the format `host:port<`, separated by commas. Example: `+127.0.0.1:27017+`, `+192.168.1.2:27017+`  |  `localhost:27017` |
| Connections Per Host a| Number |  +++The number of connections allowed per host (the pool size, per host)+++ |  +++100+++ |
| Threads Allowed To Block For Connection Multiplier a| Number |  +++Multiplier for connectionsPerHost for # of threads that can block.+++ |  +++5+++ |
| Max Wait Time a| Number |  +++The max wait time for a blocking thread for a connection from the pool in ms.+++ |  +++120000+++ |
| Connect Timeout a| Number |  +++The connection timeout in milliseconds; this is for establishing the socket connections (open). 0 is default and infinite.+++ |  +++30000+++ |
| Socket Timeout a| Number |  +++The socket timeout. 0 is default and infinite.+++ |  +++0+++ |
| Username a| String | +++The username to use for authentication.+++  |  ++++++ |
| Password a| String |  +++The password to use for authentication. If the password is null or whitespaces only, the connector won't use authentication and username must be empty too.+++ |  |
| Database a| String | +++Name of the database+++ |  | x
| SSL a| Boolean |  +++Enables an SSL connection. It is disabled by default.+++ |  +++false+++ |
| Reconnection a| <<Reconnection>> |  +++When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy+++ |  |
|===

[[config_connection-string]]
===== Connection String


===== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Connection URI a| String |  |  | x
| Reconnection a| <<Reconnection>> |  +++When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy+++ |  |
|===

==== Associated Operations

* <<addUser>>
* <<countDocuments>>
* <<createCollection>>
* <<createFileFromPayload>>
* <<createIndex>>
* <<dropCollection>>
* <<dropDatabase>>
* <<dropIndex>>
* <<dump>>
* <<executeCommand>>
* <<existsCollection>>
* <<findDocuments>>
* <<findFiles>>
* <<findOneAndUpdateDocument>>
* <<findOneDocument>>
* <<findOneFile>>
* <<getFileContent>>
* <<incrementalDump>>
* <<insertDocument>>
* <<insertDocuments>>
* <<listCollections>>
* <<listFiles>>
* <<listIndices>>
* <<mapReduceObjects>>
* <<removeDocuments>>
* <<removeFiles>>
* <<restore>>
* <<saveDocument>>
* <<updateDocuments>>
* <<updateDocumentsByFunction>>
* <<updateDocumentsByFunctions>>



== Operations

[[addUser]]
== Add User
`<mongo:add-user>`

+++
Adds a new user to a database.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Username a| String |  +++Name of the user+++ |  | x
| Password a| String |  +++Password that will be used for authentication+++ |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  +++Configure if repeatable streams should be used and their behavior+++ |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[countDocuments]]
== Count Documents
`<mongo:count-documents>`

+++
Counts the number of documents that match the given query. If no query is passed, returns the number of elements in the collection
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The target collection+++ |  | x
| Condition Query a| Binary |  +++The optional String query for counting documents. Only documents matching it will be counted. If unspecified, all documents are counted.+++ |  +++#[payload]+++ |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Number
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[createCollection]]
== Create Collection
`<mongo:create-collection>`

+++
Creates a new collection. If the collection already exists, a MongoException will be thrown.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to create+++ |  | x
| Capped a| Boolean |  +++If the collection will be capped+++ |  +++false+++ |
| Max Objects a| Number |  +++The maximum number of documents the new collection is able to contain+++ |  |
| Collection Size a| Number |  +++The maximum size of the new collection+++ |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[createFileFromPayload]]
== Create File From Payload
`<mongo:create-file-from-payload>`

+++
Creates a new MuleGridFSFile in the database, saving the given content, filename, contentType, and extraData, and answers it.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Content a| Binary |  +++The mandatory content of the new gridfs file. It may be a java.io.File, a byte[] or an InputStream.+++ |  +++#[payload]+++ |
| Filename a| String |  +++The mandatory name of new file.+++ |  | x
| Metadata a| Binary |  +++The optional String metadata of the new content type+++ |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Object
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[createIndex]]
== Create Index
`<mongo:create-index>`

+++
Creates a new index
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection where the index will be created+++ |  | x
| Field Name a| String |  +++The name of the field which will be indexed+++ |  | x
| Order a| Enumeration, one of:

** ASC
** DESC |  +++The indexing order+++ |  +++ASC+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[dropCollection]]
== Drop Collection
`<mongo:drop-collection>`

+++
Deletes a collection and all the objects it contains. If the collection does not exist, does nothing.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to drop+++ |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[dropDatabase]]
== Drop Database
`<mongo:drop-database>`

+++
Drop the current database
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[dropIndex]]
== Drop Index
`<mongo:drop-index>`

+++
Drops an existing index
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection where the index is+++ |  | x
| Index Name a| String |  +++The name of the index to drop+++ |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[dump]]
== Dump
`<mongo:dump>`

+++
Executes a dump of the database to the specified output directory. If no output directory is provided then the default /dump directory is used.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Output Directory a| String |  +++Output directory path, if no output directory is provided the default /dump directory is assumed+++ |  +++dump+++ |
| Output Name a| String |  +++Output file name, if it's not specified the database name is used+++ |  |
| Zip a| Boolean |  +++Whether to zip the created dump file or not+++ |  +++false+++ |
| Oplog a| Boolean |  +++Point in time backup (requires an oplog)+++ |  +++false+++ |
| Threads a| Number |  +++Amount of threads to execute the dump+++ |  +++5+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[executeCommand]]
== Execute Command
`<mongo:execute-command>`

+++
Executes a command on the database.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Command Name a| String |  +++The command to execute on the database+++ |  | x
| Command Value a| String |  +++The value for the command+++ |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  +++Configure if repeatable streams should be used and their behavior+++ |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[existsCollection]]
== Exists Collection
`<mongo:exists-collection>`

+++
Answers if a collection exists given its name.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection+++ |  +++#[payload]+++ |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Boolean
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[findDocuments]]
== Find Documents
`<mongo:find-documents>`

+++
Finds all documents that match a given query. If no query is specified, all documents of the collection are retrieved. If no fields object is specified, all fields are retrieved.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The target collection+++ |  | x
| Condition Query a| Binary |  +++The optional String query document. If unspecified, all documents are returned.+++ |  +++#[payload]+++ |
| Fields a| Array of String |  +++Alternative way of passing fields as a literal List+++ |  |
| Num To Skip a| Number |  +++Number of documents skip (offset)+++ |  |
| Result Limit a| Number |  +++Limit of documents to return+++ |  |
| Sort By a| Binary |  +++Indicates the String used to sort the results+++ |  |
| Return Id a| Boolean |  +++Boolean that indicates if an ID is returned in the response+++ |  +++true+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  +++Configure if repeatable streams should be used and their behavior+++ |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[findFiles]]
== Find Files
`<mongo:find-files>`

+++
Lists all the files that match the given query.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  +++A String query+++ |  | x
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Array of Object
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[findOneAndUpdateDocument]]
== Find One And Update Document
`<mongo:find-one-and-update-document>`

+++
Finds and update the first document that matches a given query. When returnNew = true, returns the updated document instead of the original document.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The target collection+++ |  | x
| Find Query a| Binary |  +++The String query that the returned object matches.+++ |  |
| Content To Update a| Binary |  +++The String mandatory object that will replace that one which matches the query+++ |  | x
| Fields a| Array of String |  +++Alternative way of passing fields as a literal List+++ |  |
| Return New Document a| Boolean |  +++Flag to specify if the returning org.bson.Document should be the updated document instead of the original. Defaults to false, returning the document before modifications+++ |  +++false+++ |
| Sort By a| Binary |  +++Indicates the String used to sort the results.+++ |  |
| Remove a| Boolean |  +++Removes the specified in the query field. Defaults to false.+++ |  +++false+++ |
| Upsert a| Boolean |  +++Whether the database should create the element if it does not exist+++ |  +++false+++ |
| Bypass Document Validation a| Boolean |  +++Lets you update documents that do not meet the validation requirements. Defaults to false+++ |  +++false+++ |
| Return Id a| Boolean |  +++Boolean that indicates if an ID is returned in the response.+++ |  +++false+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  +++Configure to use repeatable or non-repeatable streams.+++ |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[findOneDocument]]
== Find One Document
`<mongo:find-one-document>`

+++
Finds the first document that matches a given query. Throws a MongoException if no one matches the given query.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The target collection+++ |  | x
| Find Query a| Binary |  +++The mandatory String query document that the returned object matches.+++ |  +++#[payload]+++ |
| Fields a| Array of String |  +++Alternative way of passing fields as a literal List+++ |  |
| Fail On Not Found a| Boolean |  +++Flag to specify if an exception will be thrown when no object is found. For backward compatibility the default value is true.+++ |  +++true+++ |
| Return Id a| Boolean |  +++Boolean that indicates if an ID is returned in the response+++ |  +++true+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[findOneFile]]
== Find One File
`<mongo:find-one-file>`

+++
Answers the first file that matches the given query. If no object matches it, a MongoException is thrown.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  +++The String mandatory query+++ |  | x
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Object
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[getFileContent]]
== Get File Content
`<mongo:get-file-content>`

+++
Answers an inputstream to the contents of the first file that matches the given query. If no object matches it, a MongoException is thrown.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| File Id a| <<MuleBsonObjectId>> |  +++The MuleBsonObjectId of the file to be deleted+++ |  +++#[payload]+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[incrementalDump]]
== Incremental Dump
`<mongo:incremental-dump>`

+++
Executes an incremental dump of the database.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Output Directory a| String |  +++Output directory path, if no output directory is provided the default /dump directory is assumed+++ |  +++dump+++ |
| Incremental Timestamp File a| String |  +++File that keeps track of the last timestamp processed, if no file is provided one is created on the output directory+++ |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[insertDocument]]
== Insert Document
`<mongo:insert-document>`

+++
Inserts a document in a collection, setting its ID if necessary.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection where to insert the given document.+++ |  | x
| Document a| Binary |  +++A String instance.+++ |  +++#[payload]+++ |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| String
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[insertDocuments]]
== Insert Documents
`<mongo:insert-documents>`

+++
Inserts a list of documents in a collection, setting its ID if necessary.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection where to insert the given document.+++ |  | x
| Documents a| Binary |  +++A java.util.List of String.+++ |  +++#[payload]+++ |
| Write Ordered a| Boolean |  +++Indicates if the list of write operations is ordered or unordered. By default, ff an error occurs during the processing of one of the write operations, MongoDB will return without processing any remaining write operations in the list.+++ |  +++false+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[listCollections]]
== List Collections
`<mongo:list-collections>`

+++
Lists names of collections available at this database.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[listFiles]]
== List Files
`<mongo:list-files>`

+++
Lists all the files that match the given query, sorting them by filename. If no query is specified, all files are listed.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  +++the String optional query+++ |  | x
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Array of Object
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[listIndices]]
== List Indices
`<mongo:list-indices>`

+++
List existent indices in a collection.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection+++ |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  +++Configure if repeatable streams should be used and their behavior+++ |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[mapReduceObjects]]
== Map Reduce Objects
`<mongo:map-reduce-objects>`

Transforms a collection into a collection of aggregated groups, by applying a supplied element-mapping function to each element, that transforms each one into a key-value pair, grouping the resulting pairs by key, and finally reducing values in each group applying a supplying `reduce` function. 

Each supplied function is coded in JavaScript. Note that the correct way of writing those functions may not be obvious;  consult MongoDB documentation for writing them.


=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to map and reduce+++ |  | x
| Mapping Function a| String |  +++A JavaScript encoded mapping function+++ |  | x
| Reduce Function a| String |  +++A JavaScript encoded reducing function+++ |  | x
| Output Collection a| String |  +++The name of the output collection to write the results, replacing previous collection if existed, mandatory when results may be larger than 16 MB. If outputCollection is unspecified, the computation is performed in-memory and not persisted.+++ |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[removeDocuments]]
== Remove Documents
`<mongo:remove-documents>`

+++
Removes all the documents that match the a given optional query. If query is not specified, all documents are removed. However, please notice that this is normally less performant that dropping the collection and creating it and its indices again
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The collection whose elements will be removed+++ |  | x
| Find Query a| Binary |  +++The optional String query object. Documents that match it will be removed.+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[removeFiles]]
== Remove Files
`<mongo:remove-files>`

+++
Removes the file that matches the given file ID. If no file ID is specified, all files are removed.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| File Id a| <<MuleBsonObjectId>> |  +++The MuleBsonObjectId of the file to be deleted+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[restore]]
== Restore
`<mongo:restore>`

+++
Takes the output from the dump and restores it. Indexes will be created on a restore. It only does inserts with the data to restore, if existing data is there, it will not be replaced.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Input Path a| String |  +++Input path to the dump files, it can be a directory, a zip file or just a BSON file+++ |  +++dump+++ |
| Drop Collection a| Boolean |  +++Whether to drop existing collections before restore+++ |  +++false+++ |
| Oplog Replay a| Boolean |  +++Replay oplog for point-in-time restore+++ |  +++false+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[saveDocument]]
== Save Document
`<mongo:save-document>`

+++
Inserts or updates a document based on its object ID.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The collection where to insert the object+++ |  | x
| Document a| Binary |  +++The mandatory String document to insert.+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===


=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[updateDocuments]]
== Update Documents
`<mongo:update-documents>`

+++
Updates documents that matches the given query. If query is not specified, all documents are retrieved. If parameter multi is set to false, only the first document matching it will be updated. Otherwise, all the documents matching it will be updated.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to update+++ |  | x
| Find Query a| Binary |  +++The String query object used to detect the element to update.+++ |  |
| Content To Update a| Binary |  +++The String mandatory object that will replace that one which matches the query.+++ |  | x
| Multiple Update a| Boolean |  +++If all or just the first document matching the query will be updated+++ |  +++true+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[updateDocumentsByFunction]]
== Update Documents By Function
`<mongo:update-documents-by-function>`

+++
Update documents using a mongo function. If query is not specified, all documents are retrieved.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to update+++ |  | x
| Function a| String |  +++The function used to execute the update+++ |  | x
| Find Query a| Binary |  +++The String query document used to detect the element to update.+++ |  |
| Content To Update a| Binary |  +++The String mandatory document that will replace that one which matches the query.+++ |  | x
| Upsert a| Boolean |  +++If the database should create the element if it does not exist.+++ |  +++false+++ |
| Multiple Update a| Boolean |  +++If all or just the first document matching the query will be updated.+++ |  +++true+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT


[[updateDocumentsByFunctions]]
== Update Documents By Functions
`<mongo:update-documents-by-functions>`

+++
Update documents using one or more mongo function(s). If query is not specified, all documents are retrieved. If there are duplicated operators. Only the last one will be executed.
+++

=== Parameters

[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  +++The name of the collection to update+++ |  | x
| Find Query a| Binary |  +++The String query document used to detect the element to update+++ |  |
| Functions a| Binary |  +++The String of functions used to execute the update. e.g. &lt;$set,{"key":123}&gt;+++ |  | x
| Upsert a| Boolean |  +++Whether the database should create the element if it does not exist+++ |  +++false+++ |
| Multiple Update a| Boolean |  +++If all or just the first document matching the query will be updated+++ |  +++true+++ |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream | Configure to use repeatable or non-repeatable streams. |  |
| Target Variable a| String |  +++The name of a variable in which the operation's output will be placed+++ |  |
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  |
|===

=== Output

[cols=".^50%,.^50%"]
|===
| Type a| Binary
|===

=== For Configurations

* <<config>>

=== Throws

* MONGO:WRITE_CONCERN
* MONGO:RETRY_EXHAUSTED
* MONGO:UNKNOWN
* MONGO:SERVER_ERROR
* MONGO:BULK_WRITE
* MONGO:IO_EXCEPTION
* MONGO:SOCKET_READ_ERROR
* MONGO:WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:QUERY_ERROR
* MONGO:NODE_IS_RECOVERING
* MONGO:MONGO_GRID_FS
* MONGO:INVALID_CREDENTIALS
* MONGO:EXECUTION_TIMEOUT
* MONGO:SOCKET
* MONGO:COMMAND_ERROR
* MONGO:MongoExecution
* MONGO:SOCKET_CLOSED
* MONGO:SECURITY
* MONGO:WAIT_QUEUE_FULL
* MONGO:CURSOR_NOT_FOUND
* MONGO:SOCKET_OPEN
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:SOCKET_WRITE_ERROR
* MONGO:CONNECTIVITY
* MONGO:NOT_PRIMARY
* MONGO:TIMEOUT
* MONGO:DUPLICATE_KEY
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:MAPPING_EXCEPTION
* MONGO:ILLEGAL_ARGUMENT



== Types
[[Reconnection]]
=== Reconnection

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> | The reconnection strategy to use |  |
|===

[[reconnect]]
=== Reconnect

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| Count a| Number | How many reconnection attempts to make. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[reconnect-forever]]
=== Reconnect Forever

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[ExpirationPolicy]]
=== Expiration Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  |
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  |
|===

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | This is the amount of memory that will be allocated in order to consume the stream and provide random access to it. If the stream contains more data than can be fit into this buffer, then it will be expanded by according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. |  |
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower will mean that the buffer should not expand, and that a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised when the buffer gets full. |  |
| Max Buffer Size a| Number | This is the maximum amount of memory that will be used. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised. A value lower or equal to zero means no limit. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which all these attributes are expressed |  |
|===

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Max In Memory Size a| Number | Defines the maximum memory that the stream should use to keep data in memory. If more than that is consumed then it will start to buffer the content on disk. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed |  |
|===

[[MuleBsonObjectId]]
=== Mule BSON Object ID

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Value a| <<MongoIdObject>> |  |  |
|===

[[MongoIdObject]]
=== Mongo ID Object

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|===
| Field | Type | Description | Default Value | Required
| Counter a| Number |  |  |
| Date a| String |  |  |
| Machine Identifier a| Number |  |  |
| Process Identifier a| Number |  |  |
| Time a| Number |  |  |
| Time Second a| Number |  |  |
| Timestamp a| Number |  |  |
|===
