= SAP Connector Studio Configuration - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Anypoint Studio (Studio) editors help you design and update your Mule applications, properties, and configuration files.

To add and configure a connector in Studio:

. <<create-mule-project,Create a Mule project>>.
. <<add-connector-to-project,Add the connector to your Mule project>>.
. <<configure-input-source,Configure an input source for the connector's flow>>.
. <<add-connector-operation,Add a connector operation to the flow>>.
. <<configure-global-element,Configure a global element for the connector>>.
. <<conigure-other-fields,Configure the other connector fields>>.

If you are new to configuring connectors in Studio, see xref:introduction/intro-config-use-studio.adoc[Use Studio to Configure a Connector]. If, after reading this topic, you need additional information about the connector fields, see xref:sap/sap-connector-reference.adoc[SAP Connector Reference].

[[create-mule-project]]
== Create a Mule Project

In Studio, create a new Mule project in which to add and configure the connector: 

. In Studio, select *File > New > Mule Project*.
. Enter a name for your Mule project and click *Finish*.

== Add SAP Connector to Your Project in Studio

Add SAP Connector to your Mule project to automatically populate the XML code with the connector's namespace and schema location and add the required dependencies to the project's `pom.xml` file:

. In the *Mule Palette* view, click *(X) Search in Exchange*.
. In *Add Modules to Project*, type `sap` in the search field.
. Click the connector name in *Available modules*.
. Click *Add*.
. Click *Finish*.

Adding a connector to a Mule project in Studio does not make that connector available to other projects in your Studio workspace.

[[configure-input-source]]
== Configure an Input Source

An input source initiates a flow when a specified condition is met.
You can configure one of these input sources to use with SAP Connector:

* Document listener +
Listens for a change to an IDoc. When an IDoc changes, your app executes.
* Function listener +
Listens for a change to a SAP BAPI function module. When the targeted function module changes, your app executes.
* HTTP Listener +
Initiates a flow each time it receives a request on the configured host and port
* Scheduler +
Initiates a flow when a time-based condition is met

. In the *Mule Palette* view, select *SAP*. 
. Select a source operation from the list and drag it to the Studio canvas.  +
See the xref:sap/sap-connector-reference.adoc[SAP Connector Reference] for field values. 

If you are using the *Document listener* or *Function listener* source operation, proceed to <<install-sap-libraries,Install the SAP libraries>>.

[[install-sap-libraries]]
== Install the SAP Libraries

To use SAP libraries in your Mule project, you must first download the libraries to your computer. You can use the three libraries in Anypoint Studio directly, without conversion. You must have an SAP ID to download the libraries. 

The file types for each library depend on your operating system:

[%header%autowidth.spread]
|===
| OS | File Types  
| Windows a| * sapidoc3.jar
* sapjco3.jar
* sapjco3.dll

| Mac OS a| * sapidoc3.jar
* sapjco3.jar
* libsapjco3.jnilib

| Linux a| * sapidoc3.jar
* sapjco3.jar
* libsapjco3.so
|===  

[NOTE]
SAP Connector supports only version 3.0.x SAP JCo libraries. 

After you install the libraries, you can customize the global element properties and test the connection.

== Configure the Libraries in Anypoint Studio

After installing the SAP Connector in Studio and adding the connector to your Mule project, configure the libraries. 

. Double-click the connector in the flow. 
. Click the plus sign (*+*) on the right of the *Connector Configuration* field. +
This screen appears:
+
image::sap/sap-connector-configuration-01.png[]

=== Install the IDOC Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap/sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap/sap-connector-configuration-02-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap/sap-connector-configuration-02-finish.png[]

=== Install the JCO Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap/sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap/sap-connector-configuration-03-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap/sap-connector-configuration-03-finish.png[]

=== Install the JCO Native Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap/sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap/sap-connector-configuration-04-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap/sap-connector-configuration-04-finish.png[]

When you are finished installing the libraries, the configuration screen appears as follows with green check marks for each successfully installed library:

image::sap/sap-connector-libraries-installed.png[]

== Test the Connection

. Sign into SAP using your SAP login credentials to get the information you need to configure the remaining *Global Element Properties* fields as described in <<gepparms,this table>>. 
. Click *Test Connection* to ensure that you have the correct login information.

== Configure the Connector

If you need more than one SAP Connector instance in your Mule project, you can create a global SAP element. The SAP Connector object holds the configuration properties that allow you to connect to the SAP server.

To create a configuration for an SAP Connector, complete the following steps:

. Go to *Global Elements* section and click *Create*.
. Select either *SAP Inbound* or *SAP Outbound* in the *Connector Configuration* section.
. In the *General* tab pane, enter the required parameters for defining an SAP connection, which your SAP system administrator can supply.

The SAP global element properties allow you to define connection properties as well as to add the required SAP dependencies to your project.

For ease of use, SAP Connector shows only the most common properties as connector parameters. To configure a property that is not listed in the *Properties* panel, see the xref:sap/sap-connector-config-topics.adoc[Define Extended Properties] topic.

The minimum required attributes to define are:

[[gepparms]]
[%header,cols="30s,70a"]
|===
|Field |Description
|Application Server Host | SAP endpoint
|Username | Username of an authorized SAP user
|Password | Password credential of an authorized SAP user
|System Number | System number used to connect to the SAP system
|Client| The SAP client ID (usually a number) used to connect to the SAP system
|Login Language | The language to use for the SAP connection. For example, `EN` for English.
|===

As a best practice, use property placeholder syntax to load the credentials in a more simple and reusable way.

Click *Test Connection* to verify that the connection to the SAP instance is correct. If the credentials are correct you should see the `Test Connection Successful` message.

== Next

After configuring this connector in Studio, 
see the xref:sap/sap-connector-config-topics.adoc[Additional Configuration Information] topic for more configuration topics.

== See Also

* xref:introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]

