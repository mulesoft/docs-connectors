= Anypont Connector Configuration Overview
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

Because a connector is a component in a Mule app, you should understand how to configure a Mule app before you try to configure a connector.

== Connector Configuration Requirements

Every connector has specific configuration requirements, which are described in the Reference Guide for that connector. Although connectors have different configuration requirements, most connector configurations require that you configure:

* An input source to start the app flow
* The authorization credentials needed to connect to the connector's data source, for example, to the Salesforce Marketing Cloud, Amazon S3, or SAP Concur APIs. Most connectors use the Basic (username and password), OAuth, or OAuth2 authentication schemes.
* A connector operation to perform the desired action

=== Configure an Input Source

To configure an input source for a connector, select an input source associated with the connector you are configuring, or select the HTTP Listener operation or Scheduler endpoint. Not all connectors have associated input sources, but you can use the HTTP Listener operation or Scheduler endpoint as input sources for these connectors.

For more information, see:

* <<introduction/introduction-to-anypoint-connectors.adoc#input-sources, Input Sources>>
* <<http/http-connector.adoc#input-sources, HTTP Connector>>
* xref:mule-runtime::scheduler-concept.adoc[Scheduler Endpoint (Trigger)]

To see if the connector you are working with has its own input sources, see the Reference Guide for that connector.

=== Authorization credentials

Connectors that connect to external APIs use the Basic (Username and Password), OAuth, or OAuth2 authentication scheme.

To configure authorization credentials for a connector, it is recommended that you create a <<global-element,global element>>, which enables you to reuse the configuration for other connector instances. For some connectors, configuring a global element is mandatory.

=== Connector Operations

Connector operations are calls to external APIs or other connectivity-related actions that a connector can perform. You can use connector operations anywhere in a flow.

Each connector has different supported operations. To see the supported operation for a specific connector, see the Reference Guide for that connector.

== Best Practices for Configuring Connectors

The following best practices apply to configuring connectors:

* Use a global element to define configuration details that can be shared with other instances of the connector in the flow.
* Use property placeholders for property values if you are configuring a connector in Studio or by using XML.
* Test the connectivity of a connector before you deploy it.
* Configure a reconnection strategy to set the number of reconnection attempts to try after an initial failure.

[[global-element]]
=== Use a Global Element to Define Configuration Details

Global elements act as reusable objects. When you configure a global element for a connector, other instances of that connector in the flow can share that global element.

To use a global element, create one global element to configure your connection, configuration, or transport details for the connector. Reference the global element from other instances of the connector in the flow to ensure consistency across flow elements.

Besides the benefits of reusability and consistency, global elements also make connector maintenance easier. If you must change a connector's configuration, you can change the configuration once in the global element and it will apply to all connectors that reference the global element.

Most connectors support the use of a global element for authentication and other functions. For information about configuring a global element for a specific connector, see the User Guide for that connector.

[[property-placeholders]]
=== Use Property Placeholders for Property Values

Instead of using static values for a connector configuration, you can use http://ant.apache.org[Ant-style] property placeholders, as shown in this Studio example for the *Access Key*, *Secret Key*, and *Region Endpoint* fields:

image::introduction/intro-property-placeholders-studio.png[Configuring Property Placeholders]

Using property placeholders improves the maintainability of your applications because they enable you to change configuration values in one place. If you don't use property placeholders and configuration parameter values change, you must search for changed parameters in the connector configuration screens or configuration XML.

To make the values for the placeholders available, create a `.yaml` file or `.properties` file to contain the values, place the file in `src/main/resources` in the Mule project, and then reference the file from the connector configuration.

To reference a file that stores property values in Studio:

*Reviewers: I know that users can put the placeholder file in other locations, but I want to describe one way only and I think this one is consistent with best practices. Also, I don't know how to do this in Flow Designer.*

. In the connector global element *Choose Global Type* screen, search for the element called *Configuration properties*.
. Select *Configuration properties*.
. Click *OK*.
. Click *…​* to the right of the *File* field and navigate to your `.yml` or `.properties` file.

To reference a file that stores property values when configuring a connector using XML:

. Include a `<configuration-properties>` element inside the `<mule` element.
. Set the `file` parameter with your properties file name. For example:

[source,xml,linenums]
----
<mule>
  <configuration-properties
    file="myConfiguration.yaml"
    doc:name="Configuration properties"
    />`
  ...
</mule>
----

For more information about using property placeholders, see xref:mule-runtime::create-and-configure-your-properties-file.adoc[Configuring Property Placeholders].

[[test-connectivity]]
=== Test the Connectivity of the Connector

Both Studio and Flow Designer enable you to text the connection between a connector and its data source by clicking a button.

In Flow Designer, once you configure the required connection values in the *Configure Connection* screen, click *Test*:

image::introduction/intro-test-button-fd.png[Test Connection in Flow Designer]

In Studio, once you configure the required connection values in the *Global Element Properties* screen, click *Test Connection*:

image::introduction/intro-test-button-studio.png[Test Connection in Studio]

[[reconnection-strategy]]
=== Configure a Reconnection Strategy for the Connector

When a Mule app starts, a connectivity test runs on connectors that must connect to an external server. If the test fails, the default behavior is to log a warning message and continue with the deployment of the app, instead of blocking the deployment.

You can modify this behavior by setting the number of reconnection attempts to try after an initial failure and forcing the deployment to fail when all connection attempts fail.

To configure a reconnection strategy for a connector, use the *Advanced* sub-tab in the global element configuration *General* tab. The following screenshot shows a global element configuration for the HTTP Listener in Studio. The example configures a reconnection strategy that:

* Forces the deployment to fail if the connection fails and any configured reconnection attempts are exhausted.
* Limits the number of reconnection attempts to 5 at a frequency of every 4000 milliseconds (ms).

image::introduction/intro-reconnection-strategy.png[HTTP Listener Global Element]

To see if a specific connector supports a reconnection strategy and to obtain information about reconnection strategy settings, see the Reference Guide for the connector.

== Methods for Configuring Connectors

You can configure a connector in Studio, Flow Designer, or by using XML. For information, see:

* <link to the Use Studio to Configure a Connectors topic>
* <link to the Use Flow Designer to Configure a Connector topic>>
* <link to the Use XML to Configure a Connector topic>

== See Also

* https://help.mulesoft.com[MuleSoft Help Center]
