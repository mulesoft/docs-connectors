= Veeva Vault Connector 1.4 Reference - Mule 4
:page-aliases: connectors::veevavault/veevavault-connector-reference.adoc


[[config]]
== Configuration

Default Configuration for Veeva Vault Connector.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
|Name | String | Name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<config_basic-connection, Basic Connection>>
* <<config_oauth2-oidc-connection, OAuth 2.0 / Open ID Connection Provider>>
 | Connection types for this configuration. | | x
| Expiration Policy a| <<ExpirationPolicy>> |  Configures the minimum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration.   |  |
|===

[[config_basic-connection]]
=== Basic Connection

Uses basic connection for authorization.

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Response Timeout a| Number |  Maximum amount of time in milliseconds that the connector waits for the Veeva Vault response. If the time elapses, a Response Timeout exception is thrown. |  `30000` |
| Burst API Limit Profile a| One of:

* <<burst-api-limit-config>>
* Disable <<burst-api-limit-config>> |  Burst API limit profile configuration in which the Veeva Vault burst API limit exceed is configured. It is enabled by default. |  |
| Daily API Limit Profile a| One of:

* <<daily-api-limit-config>>
* Disable <<daily-api-limit-config>> |  Daily API limit profile configuration in which the Veeva Vault daily API limit exceed is configured. It is enabled by default. |  |
| Host a| String | Host. |  |
| Port a| Number | Port. |  |
| Username a| String | Username to authenticate against the proxy server. |  |
| Password a| String | Password to authenticate against the proxy server. |  |
| NTLM Domain a| String | NTLM domain. |  |
| Vault URL a| String |  Veeva Vault instance URL required for connection. |  | x
| Version a| String |  Version for the Veeva Vault instance required. |  `v19.3` |
| Client Id a| String |  Client ID required to send with each request header to the Vault instance. |  | x
| Username a| String |  Username for the Veeva Vault instance required for connection. |  | x
| Password a| String |  Password for the Veeva Vault instance required for connection. |  | x
| Reconnection a| <<Reconnection>> |  Configures a reconnection strategy to use when a connector operation fails to connect to an external server. |  |
|===

[[config_oauth2-oidc-connection]]
=== OAuth 2.0 / Open ID Connection Provider

Authorizes against any OpenID provider and later exchanges the issued access token for a Veeva session ID.

For more information on how to configure this connection type, refer to xref:veevavault-connector-studio.adoc#oauth2-oidc-connection[OAuth 2.0 / Open ID Connection Provider].

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Response Timeout a| Number |  Maximum amount of time in milliseconds that the connector waits for the Veeva Vault response. If the time elapses, a Response Timeout exception is thrown. |  `30000` |
| Burst API Limit Profile a| One of:

* <<burst-api-limit-config>>
* Disable <<burst-api-limit-config>> |  Burst API limit profile configuration in which the Veeva Vault burst API limit exceed is configured. It is enabled by default. |  |
| Daily API Limit Profile a| One of:

* <<daily-api-limit-config>>
* Disable <<daily-api-limit-config>> |  Daily API limit profile configuration in which the Veeva Vault daily API limit exceed is configured. It is enabled by default. |  |
| Host a| String | Host. |  |
| Port a| Number | Port. |  |
| Username a| String | Username to authenticate against the proxy server. |  |
| Password a| String | Password to authenticate against the proxy server. |  |
| NTLM Domain a| String | NTLM domain. |  |
| Vault URL a| String |  Veeva Vault instance URL required for connection. |  | x
| Version a| String |  Version for the Veeva Vault instance required. |  `v19.3` |
| Client Id a| String |  Client ID required to send with each request header to the Vault instance. |  | x
| OIDC Profile ID a| String |  OIDC profile ID generated by Veeva when creating a new OIDC profile. |  | x
| Reconnection a| <<Reconnection>> |  Configures a reconnection strategy to use when a connector operation fails to connect to an external server. |  |
| Consumer Key a| String |  OAuth consumer key, as registered with the service provider. |  | x
| Consumer Secret a| String |  OAuth consumer secret, as registered with the service provider. |  | x
| Authorization Url a| String |  URL of the service provider's authorization endpoint. |  `\https://{IdentityProvider}/oauth2/v2.0/authorize` |
| Access Token Url a| String |  URL of the service provider's access token endpoint. |  `\https://{IdentityProvider}/oauth2/v2.0/token` |
| Scopes a| String |  OAuth scopes to request during the OAuth dance. This value defaults to the scopes in the annotation. |  `openid` `offline_access` |
| Resource Owner Id a| String |  Resource owner ID to use with the authorization code grant type. |  |
| Before a| String |  Name of a flow to execute immediately before starting the OAuth dance. |  |
| After a| String |  Name of a flow to execute immediately after receiving an access token. |  |
| Listener Config a| String |  Configuration for the HTTP listener that listens for requests on the access token callback endpoint. |  | x
| Callback Path a| String |  Path of the access token callback endpoint. |  | x
| Authorize Path a| String |  Path of the local HTTP endpoint that triggers the OAuth dance. |  | x
| External Callback Url a| String |  URL that the OAuth provider uses to access the callback endpoint if the endpoint is behind a proxy or accessed through an indirect URL. |  |
| Object Store a| String |  Configures the object store that stores data for each resource owner. If not configured, Mule uses the default object store. |  |
|===

== Operations

* <<createDocumentRenditions>>
* <<createDocuments>>
* <<createObjectRecords>>
* <<deleteDocumentRenditions>>
* <<deleteDocuments>>
* <<deleteObjectRecords>>
* <<exportDocuments>>
* <<getAuditDetails>>
* <<getDocumentRenditionsTypes>>
* <<getDocuments>>
* <<getObjectRecords>>
* <<getPicklists>>
* <<invokeRestApi>>
* <<query>>
* <<sparkMessageValidator>>
* <<unauthorize>>
* <<updateDocuments>>
* <<updateObjectRecords>>



[[createDocumentRenditions]]
=== Create Document Renditions
`<veevavault:create-document-renditions>`


Creates document renditions in bulk on Veeva Vault using document metadata provided in CSV or JSON format.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Document metadata as an Input Stream. The payload must be in the format specified in the *Metadata Format* field. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[createDocuments]]
=== Create Documents
`<veevavault:create-documents>`


Creates single or multiple documents on Veeva Vault using document metadata provided in CSV or JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Document metadata as an Input Stream. The payload must be in the format specified in the *Metadata Format* field. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[createObjectRecords]]
=== Create Object Records
`<veevavault:create-object-records>`


Creates bulk object records for the selected vault object using object metadata provided in CSV or JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Object Name a| String |  Object name. |  | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Object Metadata a| Binary |  Vault object metadata in CSV or JSON format as an Input Stream to create bulk object records on the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[deleteDocumentRenditions]]
=== Delete Document Renditions
`<veevavault:delete-document-renditions>`


Deletes document renditions in bulk from Veeva Vault using document metadata provided in CSV or JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Document metadata in CSV OR JSON format as an Input Stream to delete multiple document renditions from the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[deleteDocuments]]
=== Delete Documents
`<veevavault:delete-documents>`


Deletes single or multiple documents from Veeva Vault using document metadata provided in CSV or JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Document metadata in CSV or JSON format as an Input Stream to delete single or multiple documents from the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[deleteObjectRecords]]
=== Delete Object Records
`<veevavault:delete-object-records>`


Deletes object records in bulk from the selected vault object using object metadata provided in CSV or JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Object Name a| String |  Object name. |  | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Object Metadata a| Binary |  Vault object metadata in CSV or JSON format as an Input Stream to create bulk object records on the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[exportDocuments]]
=== Export Documents
`<veevavault:export-documents>`


Queries a set of documents to export to your vault’s FTP staging server.

Use the *Export Documents* operation in a separate asynchronous flow by using Async Scope and passing the payload with document IDs. When used asynchronously, the *Export Documents* operation executes in separate flow thread and waits for the specified polling interval to poll the job status until it is successful while the main flow continues its process.

The FTP staging area in the folder stores the exported documents, with the
`\{root}/\{userId}/\{jobId}/\{documentIds}/\{versions}` hierarchy structure.

The following example shows the *Export Documents* operation returning job results as a response:

----
[
  {
	"file": "/41601/249051/0_1/TestDocument.docx",
	"user_id__v": 1885110,
	"id": 249051,
	"responseStatus": "SUCCESS",
	"minor_version_number__v": 1,
	"major_version_number__v": 0
  },
  {
	"file": "/41601/249050/0_1/TestDocument.docx",
	"user_id__v": 1885110,
	"id": 249050,
	"responseStatus": "SUCCESS",
	"minor_version_number__v": 1,
	"major_version_number__v": 0
  },
  {
	"file": "/41601/249052/0_1/TestDocument.docx",
	"user_id__v": 1885110,
	"id": 249052,
	"responseStatus": "SUCCESS",
	"minor_version_number__v": 1,
	"major_version_number__v": 0
  }
]
----

This example contains the following attributes:

* `file` +
Uses the `"/{jobId}/{documentId}/{major-minor-version}/{filename}"` format, which is the absolute file path location on the Vault FTP server staging area.
* `user_id__v` +
Vault system user ID of a user whose credentials are configured in the connector. The folder is created on the Vault FTP server staging area root location under where the exported file is located. The folder is created with the name of the user ID prefixed with the letter `u`, for example
`/uXXXXXXX/{jobId}/{documentId}/{major-minor-version}/{filename}\)`.
* `id` +
Document ID of the exported document file.
* `major_version_number__v` +
Major version number of the exported document file.
* `minor_version_number__v` +
Minor version number of the exported document file.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Document metadata in CSV or JSON format as an Input Stream to export documents from vault. |  `#[payload]` |
| Source a| Boolean |  To exclude source files, set to `false`.  |  `true` |
| Renditions a| Boolean |  To include renditions, set to `true`. |  `false` |
| All Versions a| Boolean |  To include all versions or the latest version, set to `true`. |  `false` |
| Polling Interval a| Number |  Poll the vault at the specified interval, in seconds, until the job is successful. |  `10` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[getAuditDetails]]
=== Get Audit Details
`<veevavault:get-audit-details>`


Retrieves all audit details for a specific audit type. Place a For-Each/Splitter element after this operation to fetch each JSON data (page) in sequential order.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Audit Type a| String |  Audit type. |  | x
| Start Date a| String |  Start date to retrieve audit information. This date cannot be more than 30 days ago. Dates must be of `YYYY-MM-DDTHH:MM:SSZ` format. Dates and times are in UTC. If the time is not specified, it defaults to midnight (T00:00:00Z) on the specified date. |  |
| End Date a| String |  End date to retrieve audit information. This date cannot be more than 30 days ago. Dates must be of `YYYY-MM-DDTHH:MM:SSZ` format. Dates and times are in UTC. If the time is not specified, it defaults to midnight (T00:00:00Z) on the specified date. |  |
| Fetch Size a| Number |  Number of limits or records per page. |  `1000` |
| Batch Size a| Number |  Number of pages per batch. |  `10` |
| Streaming Strategy a| * <<repeatable-in-memory-iterable>>
* <<repeatable-file-store-iterable>>
* non-repeatable-iterable |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Array of Message of Binary payload and Void attributes
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[getDocumentRenditionsTypes]]
=== Get Document Renditions Types
`<veevavault:get-document-renditions-types>`


Retrieves document rendition types using the document ID metadata in JSON format.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Document Metadata a| Binary |  Document ID metadata in a JSON format payload, for example, `{"documentId": "534"}`. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[getDocuments]]
=== Get Documents
`<veevavault:get-documents>`


Retrieves document details from Veeva Vault. You can either:

* Provide document properties (document type, subtype, and classification) to retrieve document details.
+
If document properties are provided, the *Get Documents* operation builds the VQL query dynamically. The VQL query is then executed on the vault to retrieve document details.

* Have document properties (document type, subtype, and classification) fetched to retrieve document details.
+
If document properties are not provided, the document properties metadata is fetched using `/api/{version}/metadata/objects/documents/properties` and the VQL query is built based on the document metadata properties added or inserted in the *Document Properties* list. If metadata properties are not provided, then all queryable document properties are used and executed in the VQL query.

Place a For-Each/Splitter element after this operation to fetch each document’s data (page) sequentially.

This operation provides a paging mechanism based on Mule standard pagination. Refer to xref:veevavault-connector-config-topics#streaming_and_pagination.adoc[Streaming and Pagination] for more details.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Streaming Strategy a| * <<repeatable-in-memory-iterable>>
* <<repeatable-file-store-iterable>>
* non-repeatable-iterable |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Type a| String |  Document type to retrieve the type. |  |
| SubType a| String |  Document subtype to retrieve the type. |  |
| Classification a| String |  Document classification to retrieve the classification. |  |
| Document Properties a| Array of String |  List of document properties to build a VQL query. |  |
| WHERE Clause a| String |  WHERE clause that is appended to dynamically build a VQL query. |  |
| Fetch Size a| Number |  Fetch size which limits the records per page. |  `1000` |
| Batch Size a| Number |  Batch size which accommodates the number of pages in a specified number of batches. |  `10` |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Array of Message of Binary payload and Void attributes
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[getObjectRecords]]
=== Get Object Records
`<veevavault:get-object-records>`


Retrieves object records details using object metadata fields to build a VQL query dynamically and execute on the vault to get object details. Place a For-Each/Splitter element after this operation to fetch each object records (page) sequentially.

This operation provides a paging mechanism based on Mule standard pagination. Refer to xref:veevavault-connector-config-topics#streaming_and_pagination.adoc[Streaming and Pagination] for more details.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Object Name a| String |  Object name. |  | x
| Object Fields a| Array of String |  Object fields list to include in the dynamic VQL query. |  |
| WHERE Clause a| String | WHERE clause. |  |
| Fetch Size a| Number |  Number of limits or records per page.  |  `1000` |
| Batch Size a| Number |  Number of pages per batch.  |  `10` |
| Streaming Strategy a| * <<repeatable-in-memory-iterable>>
* <<repeatable-file-store-iterable>>
* non-repeatable-iterable |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Array of Message of Binary payload and Void attributes
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[getPicklists]]
=== Get Picklists
`<veevavault:get-picklists>`


Retrieves all available values configured on a picklist.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Picklist Name a| String |  Picklist name. |  |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[invokeRestApi]]
=== Invoke REST API
`<veevavault:invoke-rest-api>`


Invokes generic Veeva Vault REST APIs.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Method a| Enumeration, one of:

** GET
** DELETE
** POST
** PUT |  HTTP method to send the request. |  `GET` |
| Path a| String |  Path in which the request is sent, for example, `/vobjects/{object_name}/actions/{action_name}`. |  `/` |
| Body a| Any |  Body of the request message. |  `#[payload]` |
| Headers a| Object |  HTTP headers the message must include. |  |
| URI Parameters a| Object |  URI parameters that are provided in the *Path* field. |  |
| Query Parameters a| Object |  Query parameters the request must include. |  |
| Request Streaming Mode a| Enumeration, one of:

** AUTO
** ALWAYS
** NEVER |  Whether the request must be sent using streaming or not. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| <<HttpResponseAttributes>>
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[query]]
=== Query
`<veevavault:query>`


Executes the specified VQL query on the vault and retrieves the result in a paginated data input stream. Place a For-Each/Splitter element after the Query operation to fetch each record in sequential order.

This operation provides a paging mechanism based on Mule standard pagination. Refer to xref:veevavault-connector-config-topics#streaming_and_pagination.adoc[Streaming and Pagination] for more details.

[NOTE]
Do not specify `LIMIT` and `OFFSET` in the VQL query. These parameters are incorporated internally.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Streaming Strategy a| * <<repeatable-in-memory-iterable>>
* <<repeatable-file-store-iterable>>
* non-repeatable-iterable |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| VQL Query a| String |  VQL query required as per Veeva API documentation. |  | x
| Input Parameters a| Object |  Input parameters in the format `#[{'name': 'Hemant', 'nickname': payload, 'company': vars.company}]`. |  |
| Fetch Size a| Number |  Number of limits or records per page. |  `1000` |
| Batch Size a| Number |  Number of pages per batch. |  `10` |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Array of Message of Binary payload and Void attributes
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[sparkMessageValidator]]
=== Spark Validator
`<veevavault:spark-message-validator>`


Validates and verifies Spark messages triggered from the vault with a signature and public key. Upon successful validation and verification, the Spark message can be further processed in the Mule flow according to your business requirements. Refer to \https://developer.veevavault.com/sdk/#spark-messaging[Spark Messaging feature and functionalities and setup] for more details.

The output of the *Spark Validator* operation includes Spark attributes (optional) with the Spark message as it is received from the vault.

[NOTE]
Before triggering a Spark message from the vault, make sure to raise a support ticket with Veeva Vault Support to increase the time interval (for example, 10 seconds) for the Spark message to resend or retry. By default, the time interval is configured as 3 seconds, which is less than the time required for the *Spark Validator* operation to complete message validation and verification.

[NOTE]
As per Veeva Systems, the public key (00001.pem) expires every two years. You receive notification in advance advising you of the expiration date. If you are using the *Spark Validator* operation in a Mule application flow, after the public key expiration date you must remove the public key file from the path configured in the *Public Key Path* field. A new public key will be created during execution of the key removal. If you don’t do this, Spark message verification fails as `INVALID_SPARK_MESSAGE`. The Mule application deployed on CloudHub with the default path must be restarted for successful Spark message verification.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
|Include Spark Headers|Boolean|Flag to include Spark headers received from the vault in the Spark validator output.|`false`|
|Public Key Path|String|Directory path to store the public key (00001.pem) file that is used to verify incoming Spark messages with a signature. Retrieved from the vault, if not specified.|`${mule.home}/apps/${app.name}/publickeys`|
|Spark Headers|Object|Spark headers received from the vault and embedded in the Spark message.|`#[attributes.headers]`|
|Spark Message|Input Stream|Spark message body received from the vault.|`#[payload]`|
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| Object
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[unauthorize]]
=== Unauthorize
`<veevavault:unauthorize>`


Deletes all the access token information of a given resource owner ID so that it is impossible to execute any operation for that user without doing the authorization dance again.



[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Resource Owner Id a| String |  ID of the resource owner for whom to invalidate access. |  |
|===


==== Associated Configurations
* <<config>>



[[updateDocuments]]
=== Update Documents
`<veevavault:update-documents>`


Updates bulk documents using editable metadata in the payload provided in CSV or JSON format.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Document Metadata a| Binary |  Editable document metadata in CSV OR JSON format as an Input Stream to update single or multiple documents on the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED


[[updateObjectRecords]]
=== Update Object Records
`<veevavault:update-object-records>`


Updates object records in bulk using object metadata in CSV or JSON format.


[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | Name of the configuration to use. | | x
| Object Name a| String |  Object name. |  | x
| Metadata Format a| Enumeration, one of:

** CSV
** JSON |  Metadata format. |  | x
| Object Metadata a| Binary |  Vault object metadata in CSV or JSON format as an Input Stream to create bulk object records on the vault. |  `#[payload]` |
| Output Mime Type a| String |  MIME type of the payload that this operation outputs. |  |
| Output Encoding a| String |  Encoding of the payload that this operation outputs. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configures how Mule processes streams. Repeatable streams are the default behavior. |  |
| Target Variable a| String |  Name of the variable that stores the operation's output. |  |
| Target Value a| String |  Expression that evaluates the operation’s output. The outcome of the expression is stored in the *Target Variable* field. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  Retry strategy in case of connectivity errors. |  |
|===

==== Output
[%autowidth.spread]
|===
|Type |Binary
|===

==== Associated Configurations
* <<config>>

==== Throws
* VEEVAVAULT:API_LIMIT_EXCEEDED
* VEEVAVAULT:INVALID_KEY_FORMAT
* VEEVAVAULT:INVALID_SESSION_ID
* VEEVAVAULT:EXECUTION
* VEEVAVAULT:CLIENT_PROTOCOL
* VEEVAVAULT:INVALID_DATA
* VEEVAVAULT:RESPONSE_TIMEOUT
* VEEVAVAULT:IOEXCEPTION
* VEEVAVAULT:PARAMETER_REQUIRED
* VEEVAVAULT:CONNECTIVITY
* VEEVAVAULT:INVALID_AUTH
* VEEVAVAULT:INVALID_DOCUMENT
* VEEVAVAULT:USERNAME_OR_PASSWORD_INCORRECT
* VEEVAVAULT:RETRY_EXHAUSTED
* VEEVAVAULT:JSON_EXCEPTION
* VEEVAVAULT:ATTRIBUTE_NOT_SUPPORTED
* VEEVAVAULT:OPERATION_NOT_ALLOWED
* VEEVAVAULT:METHOD_NOT_SUPPORTED
* VEEVAVAULT:NO_PERMISSION
* VEEVAVAULT:INVALID_SPARK_MESSAGE
* VEEVAVAULT:INVALID_TOKEN
* VEEVAVAULT:MALFORMED_URL
* VEEVAVAULT:INSUFFICIENT_ACCESS
* VEEVAVAULT:INACTIVE_USER
* VEEVAVAULT:SESSION_EXPIRED



== Types

=== Reconnection

Configures a reconnection strategy for an operation.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to `true`, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> | Reconnection strategy to use. |  |
|===

[[reconnect]]
=== Reconnect

Configures a standard reconnection strategy, which specifies how often to reconnect and how many reconnection attempts the connector source or operation can make.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  |
| Count a| Number | How many reconnection attempts the Mule app can make. |  |
|===

[[reconnect-forever]]
=== Reconnect Forever

Configures a forever reconnection strategy by which the connector source or operation attempts to reconnect at a specified frequency for as long as the Mule app runs.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often to attempt to reconnect, in milliseconds. |  |
|===

[[ExpirationPolicy]]
=== Expiration Policy

Configures an expiration policy strategy.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | Configures the maximum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. |  |
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | Time unit for the *Max Idle Time* field. |  |
|===

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

Configures the in-memory streaming strategy by which the request fails if the data exceeds the MAX buffer size. Always run performance tests to find the optimal buffer size for your specific use case.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | Initial amount of memory to allocate to the data stream. If the streamed data exceeds this value, the buffer expands by *Buffer Size Increment*, with an upper limit of *Max In Memory Size value*. |  |
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a `STREAM_MAXIMUM_SIZE_EXCEEDED` error is raised when the buffer gets full. |  |
| Max Buffer Size a| Number | Maximum size of the buffer. If the buffer size exceeds this value, Mule raises a `STREAM_MAXIMUM_SIZE_EXCEEDED` error. A value of less than or equal to `0` means no limit. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the *Initial Buffer Size*, *Buffer Size Increment*, and *Buffer Unit* fields. |  |
|===

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

Configures the repeatable file-store streaming strategy by which Mule keeps a portion of the stream content in memory. If the stream content is larger than the configured buffer size, Mule backs up the buffer's content to disk and then clears the memory.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Size a| Number a| Maximum amount of memory that the stream can use for data. If the amount of memory exceeds this value, Mule buffers the content to disk. To optimize performance:

* Configure a larger buffer size to avoid the number of times Mule needs to write the buffer on disk. This increases performance, but it also limits the number of concurrent requests your application can process, because it requires additional memory.

* Configure a smaller buffer size to decrease memory load at the expense of response time. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the *In Memory Size* field. |  |
|===

[[repeatable-in-memory-iterable]]
=== Repeatable In Memory Iterable

Configures the repeatable in memory iterable type.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | Initial amount of memory to allocate to the data stream. If the streamed data exceeds this value, the buffer expands by *Buffer Size Increment*, with an upper limit of *Max In Memory Size value*. |  |
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a `STREAM_MAXIMUM_SIZE_EXCEEDED` error is raised when the buffer gets full. |  |
| Max Buffer Size a| Number | Maximum size of the buffer. If the buffer size exceeds this value, Mule raises a `STREAM_MAXIMUM_SIZE_EXCEEDED` error. A value of less than or equal to `0` means no limit. |  |
|===

[[repeatable-file-store-iterable]]
=== Repeatable File Store Iterable

Configures the file store iterable type.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Objects a| Number | Maximum amount of instances to keep in memory. If more than that is required, content on the disk is buffered. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | Unit for the *In Memory Size* field. |  |
|===

[[HttpResponseAttributes]]
=== HTTP Response Attributes

Configures HTTP response attributes for the configuration.

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Status Code a| Number | HTTP status code of the response. Former 'http.status'. |  | x
| Reason Phrase a| String | HTTP reason phrase of the response. Former 'http.reason'. |  | x
| Headers a| Object | Map of HTTP headers in the message. Former properties. |  | x
|===

[[burst-api-limit-config]]
=== Burst Api Limit Config

Use *Burst API Limit Profile* if the specified burst API limit of the Veeva Vault API reaches or exceeds the configured threshold value.

If the value of *Burst API Limit Profile* is set to `Burst api limit config (Default)`, the connector evaluates the specified burst API limit of the Veeva Vault API response header (`X-VaultAPI-BurstLimitRemaining`) against the configured threshold value. If the remaining burst API limit reaches or exceeds the configured threshold value, the connector waits for the specified amount of time to restart the count for *Burst Limit Remaining*.

For more information, refer to \https://developer.veevavault.com/docs/#api-rate-limits[API Rate Limit Headers].

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Api Limit a| Number | Veeva Vault API threshold limit. When this threshold is reached or exceeded, the connector waits the specified time. | `200` |
| Wait Time a| Number | Time the connector waits once the threshold value reaches or exceeds the remaining API calls. | `5` |
| Max Wait Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | Time unit for the *Wait Time* field. | `MINUTES` |
|===

[[daily-api-limit-config]]
=== Daily Api Limit Config

Use *Daily API Limit Profile* to configure the API limit threshold that is evaluated against the remaining daily API limit calls. If the daily API limit calls reach or exceed the specified API limit threshold value, an exception is thrown. *Daily API Limit Profile* is disabled by default.

For more information, refer to \https://developer.veevavault.com/docs/#api-rate-limits[API Rate Limit Headers].

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Api Limit a| Number | API limit threshold value to set the allowed daily limit for the number of API calls. Once the API limit threshold value is reached, the connector throws an `API_LIMIT_EXCEED` exception for each request invoking an API call. | `10000` |
|===

== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
