= MongoDB Connector Reference - Mule 4
:page-aliases: connectors::mongodb/mongodb-connector-reference.adoc

Support Category: https://www.mulesoft.com/legal/versioning-back-support-policy#anypoint-connectors[Select]

MongoDB Connector v5.3

Anypoint Connector for MongoDB is a closed-source connector that provides a connection between the Mule runtime and third-party software on a MongoDB server.

Release Notes: xref:release-notes::connector/mongodb-connector-release-notes-mule-4.adoc[MongoDB Connector Release Notes]

== Configurations
---
[[config]]
=== Config


==== Parameters
[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<config_connection, Connection>>
* <<config_connection-string, Connection String>>
 | The connection types to provide to this configuration. | | x
| Expiration Policy a| <<ExpirationPolicy>> |  Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform expires the instance at the exact moment that it becomes eligible. The runtime purges the instances when it sees fit. |  |
| Enable Metadata a| Boolean a| `collectionMetadataSamples:` Stores templates to build metadata based on Document parameters union `Key (String):` Collection Name. `List<String>:` List of ObjectIDs Documents in specific collection. |  true |
| Collection Metadata samples a| Object |  |  |
|===

==== Connection Types

[[config_connection]]
===== Connection


====== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Servers (host:port) a| String a|  A list of MongoDB instance, with the format `host:port`, separated by commas. Example: `+127.0.0.1:27017+`, `+192.168.1.2:27017+` |  `+localhost:27017+` |
| Connections Per Host a| Number |  The number of connections allowed per host (the pool size, per host). |  100 |
| Threads Allowed To Block For Connection Multiplier a| Number |  Multiplier for connectionsPerHost for # of threads that can block. |  5 |
| Max Wait Time a| Number |  The max wait time for a blocking thread for a connection from the pool in milliseconds. |  120000 |
| Connect Timeout a| Number |  The connection timeout in milliseconds; this is for establishing the socket connections (open). 0 is default and infinite. |  30000 |
| Socket Timeout a| Number |  The socket timeout. 0 is default and infinite. |  0 |
| Username a| String |  The username to use for authentication. |   |
| Password a| String |  The password to use for authentication. If the password is null or whitespaces only, the connector won't use authentication and username must be empty too. |  |
| Database a| String |  Name of the database. |  | x
| SSL a| Boolean |  This is for enabling an SSL connection. It is disabled by default. |  false |
| Tls Context a| <<Tls>> |  |  |
| Reconnection a| <<Reconnection>> |  When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
|===

[[config_connection-string]]
===== Connection String


====== Parameters
[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Connection URI a| String |  |  | x
| Reconnection a| <<Reconnection>> |  When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
|===

== Supported Operations

* <<addUser>>
* <<countDocuments>>
* <<createCollection>>
* <<createFileFromPayload>>
* <<createIndex>>
* <<dropCollection>>
* <<dropDatabase>>
* <<dropIndex>>
* <<dump>>
* <<executeCommand>>
* <<executeGenericCommand>>
* <<existsCollection>>
* <<findDocuments>>
* <<findFiles>>
* <<findOneAndUpdateDocument>>
* <<findOneDocument>>
* <<findOneFile>>
* <<getFileContent>>
* <<incrementalDump>>
* <<insertDocument>>
* <<insertDocuments>>
* <<listCollections>>
* <<listFiles>>
* <<listIndices>>
* <<mapReduceObjects>>
* <<removeDocuments>>
* <<removeFiles>>
* <<restore>>
* <<saveDocument>>
* <<updateDocuments>>
* <<updateDocumentsByFunction>>
* <<updateDocumentsByFunctions>>

== Sources

* <<deleted-object-trigger>>
* <<modified-object-trigger>>
* <<new-object-trigger>>

[NOTE]
MongoDB sources (listeners) use Object Store to save watermarks. You might experience limitations that are specific to the Object Store implementation you are using (Object Store for CloudHub deployments or Object Store for on-premises deployments), so configure Object Store to suit your needs. +
For more information, see https://help.mulesoft.com/s/article/The-Different-Types-of-Object-Stores-Explained[The Different Types of Object Stores Explained].

== Operations

[[addUser]]
=== Add User

`<mongo:add-user>`

Adds a new user for this database.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Username a| String |  Name of the user. |  | x
| Password a| String |  Password to use for authentication. |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[countDocuments]]
=== Count Documents

`<mongo:count-documents>`


Counts the number of documents that match a query. If no query is passed, returns the number of elements in the collection.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The target collection. |  | x
| Condition Query a| Binary |  The optional String query for counting documents. Only documents matching it will be counted. If unspecified, all documents are counted. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Number
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[createCollection]]
=== Create Collection

`<mongo:create-collection>`

Creates a new collection. If the collection already exists, a `MongoException` is thrown.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to create. |  | x
| Capped a| Boolean |  If the collection will be capped. |  false |
| Max Objects a| Number |  The maximum number of documents the new collection is able to contain. |  |
| Collection Size a| Number |  The maximum size of the new collection. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[createFileFromPayload]]
=== Create File From Payload

`<mongo:create-file-from-payload>`

Creates a new `MuleGridFSFile` in the database, saving the content, filename, contentType, and extraData, and answers it.

==== Parameters
[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Content a| Binary a|  The mandatory content of the new `gridfs` file. It may be a `java.io.File`, a `byte[]`, or an `InputStream`. a|  `#[payload]` |
| Filename a| String |  The mandatory name of new file. |  | x
| Metadata a| Binary |  The optional String metadata of the new content type. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Object
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[createIndex]]
=== Create Index
`<mongo:create-index>`

Creates a new index.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection where the index is created. |  | x
| Field Name a| String |  The name of the field which is indexed. |  | x
| Order a| Enumeration, one of:

** ASC
** DESC |  The indexing order. |  ASC |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[dropCollection]]
=== Drop Collection

`<mongo:drop-collection>`

Deletes a collection and all the objects it contains. If the collection does not exist, This operation does nothing.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to drop. |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[dropDatabase]]
=== Drop Database

`<mongo:drop-database>`

Drop the current database.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[dropIndex]]
=== Drop Index

`<mongo:drop-index>`

Drops an existing index.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection where the index is. |  | x
| Index Name a| String |  The name of the index to drop. |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[dump]]
=== Dump

`<mongo:dump>`

Executes a dump of the database to the specified output directory. If no output directory is provided then the default `/dump` directory is used.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Output Directory a| String a|  Output directory path, if no output directory is provided the default `/dump` directory is assumed. |  dump |
| Output Name a| String |  Output file name - if not specified, the database name is used. |  |
| Zip a| Boolean |  Whether to zip the created dump file or not, |  false |
| Oplog a| Boolean |  Point in time backup (requires an `oplog`). |  false |
| Threads a| Number |  Amount of threads to execute the dump. |  5 |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[executeCommand]]
=== Execute Command

`<mongo:execute-command>`


Executes a command on the database.


==== Parameters
[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Command Name a| String |  The command to execute on the database. |  | x
| Command Value a| String |  The value for the command |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a| `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[executeGenericCommand]]
=== Execute Generic Command

`<mongo:execute-generic-command>`


Executes a generic command on the database.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Command a| Binary |  The generic command to execute on the database. a|  `#[payload]` |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[existsCollection]]
=== Exists Collection

`<mongo:exists-collection>`


Answers if a collection exists given its name.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection a|  `#[payload]` |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Boolean
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[findDocuments]]
=== Find Documents

`<mongo:find-documents>`

Finds all documents that match a given query. If no query is specified, all documents of the collection are retrieved. If no fields object is specified, all fields are retrieved.

==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The target collection. |  | x
| Condition Query a| Binary |  The optional String query document. If unspecified, all documents are returned. a|  `#[payload]` |
| Fields a| Array of String |  Alternative way of passing fields as a literal List. |  |
| Num To Skip a| Number |  Number of documents to skip (offset). |  |
| Result Limit a| Number |  Limit of documents to return. |  |
| Sort By a| Binary |  Indicates the String used to sort the results. |  |
| Return Id a| Boolean |  Boolean that indicates if an ID is return in the response. |  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[findFiles]]
=== Find Files

`<mongo:find-files>`


Lists all the files that match a query.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  A String query. |  | x
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Array of Object
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[findOneAndUpdateDocument]]
=== Find One And Update Document

`<mongo:find-one-and-update-document>`


Finds and updates the first document that matches a given query. When `returnNew = true`, returns the updated document instead of the original document.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The target collection. |  | x
| Find Query a| Binary |  The String query that the returned object matches. |  |
| Content To Update a| Binary |  The String mandatory object that replaces that one which matches the query. |  | x
| Fields a| Array of String |  Alternative way of passing fields as a literal list. |  |
| Return New Document a| Boolean |  Flag to specify if the returning org.bson.Document should be the updated document instead of the original. Defaults to false, returning the document before modifications |  false |
| Sort By a| Binary a| Indicates the `String` used to sort the results. |  |
| Remove a| Boolean |  Removes the specified in the query field. Defaults to false |  false |
| Upsert a| Boolean |  Whether the database should create the element if it does not exist |  false |
| Bypass Document Validation a| Boolean |  Lets you update documents that do not meet the validation requirements. Defaults to false. |  false |
| Return Id a| Boolean |  Boolean that indicates if an ID is return in the response. |  false |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[findOneDocument]]
=== Find One Document

`<mongo:find-one-document>`


Finds the first document that matches a given query. Throws a `MongoException` if no document matches the given query.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The target collection. |  | x
| Find Query a| Binary |  The mandatory String query document that the returned object matches. a|  `#[payload]` |
| Fields a| Array of String | Alternative way of passing fields as a literal list. |  |
| Fail On Not Found a| Boolean |  Flag to specify if an exception is thrown when no object is found. For backward compatibility the default value is true. |  true |
| Return Id a| Boolean | Boolean that indicates if an ID is return in the response. |  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[findOneFile]]
=== Find One File

`<mongo:find-one-file>`


Answers the first file that matches the given query. If no object matches it, a `MongoException` is thrown.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  The String mandatory query. |  | x
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Object
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[getFileContent]]
=== Get File Content

`<mongo:get-file-content>`


Answers an inputstream to the contents of the first file that matches the given query. If no object matches it, a `MongoException` is thrown.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| File Id a| <<MuleBsonObjectId>> a|  The `MuleBsonObjectId` of the file to be deleted. |  `#[payload]` |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[incrementalDump]]
=== Incremental Dump

`<mongo:incremental-dump>`


Executes an incremental dump of the database.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Output Directory a| String a| Output directory path, if no output directory is provided the default `/dump` directory is assumed. |  dump |
| Incremental Timestamp File a| String | File that keeps track of the last timestamp processed, if no file is provided one is created on the output directory. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[insertDocument]]
=== Insert Document

`<mongo:insert-document>`


Inserts a document in a collection, setting its ID if necessary.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection where to insert the given document. |  | x
| Document a| Binary |  A String instance. |  `#[payload]` |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |String
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[insertDocuments]]
=== Insert Documents

`<mongo:insert-documents>`


Inserts a list of documents in a collection, setting its ID if necessary.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection where to insert the given document. |  | x
| Documents a| Binary a|  A `java.util.List` of `String`. a|  `#[payload]` |
| Write Ordered a| Boolean a|  Indicates if the list of write operations is ordered or unordered. By default, if an error occurs during the processing of one of the write operations, MongoDB returns without processing any remaining write operations in the list. Returns a new `BsonDocumentWrapper(this, codecRegistry.get(Document.class));` value.|  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[listCollections]]
=== List Collections

`<mongo:list-collections>`


Lists names of collections available in this database.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[listFiles]]
=== List Files

`<mongo:list-files>`


Lists all the files that match the given query and sorting them by filename. If no query is specified, all files are listed.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Find Query a| Binary |  The String optional query. |  | x
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Array of Object
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[listIndices]]
=== List Indices

`<mongo:list-indices>`


List existent indices in a collection.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection. |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[mapReduceObjects]]
=== Map Reduce Objects

`<mongo:map-reduce-objects>`


Transforms a collection into a collection of aggregated groups, by applying a supplied element-mapping function to each element, that transforms each one into a key-value pair, grouping the resulting pairs by key, and finally reducing values in each group applying a suppling `reduce` function. Each supplied function is coded in JavaScript. Note that the correct way of writing those functions may not be obvious; consult the MongoDB documentation for writing them.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to map and reduce. |  | x
| Mapping Function a| String |  A JavaScript encoded mapping function. |  | x
| Reduce Function a| String |  A JavaScript encoded reducing function. |  | x
| Output Collection a| String a|  The name of the output collection to write the results, replacing the previous collection if it exists, which is mandatory when results may be larger than 16 MB. If `outputCollection` is not specified, the computation is performed in-memory and not persisted. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[removeDocuments]]
=== Remove Documents

`<mongo:remove-documents>`

Removes all the documents that match a given optional query. If a query is not specified, all documents are removed.

NOTE: This is normally less performant than dropping the collection, and creating the collection and its indices again.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The collection whose elements you want to remove. |  | x
| Find Query a| Binary |  The optional String query object. Documents that match it are removed. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[removeFiles]]
=== Remove Files

`<mongo:remove-files>`


Removes the file that matches the given file ID. If no file ID is specified, all files are removed.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| File Id a| <<MuleBsonObjectId>> a|  The `MuleBsonObjectId` of the file to be deleted. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[restore]]
=== Restore

`<mongo:restore>`


Takes the output from the dump and restores it. Indexes are created on a restore. This operation only does inserts with the data to restore, if existing data is there, it is not replaced.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Input Path a| String |  Input path to the dump files, it can be a directory, a zip file, or just a BSON file. |  dump |
| Drop Collection a| Boolean |  Whether to drop existing collections before a restore. |  false |
| Oplog Replay a| Boolean |  Replay `oplog` for point-in-time restore. |  false |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[saveDocument]]
=== Save Document

`<mongo:save-document>`


Inserts or updates a document based on its object ID.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The collection where to insert the object |  | x
| Document a| Binary |  The mandatory String document to insert. |  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===


=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[updateDocuments]]
=== Update Documents

`<mongo:update-documents>`

Updates documents that matches the given query. If query is not specified, all documents are retrieved. If parameter `Multiple Update` is set to false, only the first document matching the query is updated. Otherwise, all the documents matching the query are updated.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to update |  | x
| Find Query a| Binary |  The String query object used to detect the element to update. |  |
| Content To Update a| Binary |  The mandatory String object that replaces the one that matches the query. |  | x
| Multiple Update a| Boolean | If all or just the first document matching the query will be updated. |  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[updateDocumentsByFunction]]
=== Update Documents By Function

`<mongo:update-documents-by-function>`


Update documents using a Mongo function. If a query is not specified, all documents are retrieved.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to update. |  | x
| Function a| String |  The function used to execute the update. |  | x
| Find Query a| Binary |  The String query document used to detect the element to update. |  |
| Content To Update a| Binary |  The mandatory String document that replaces the one that matches the query. |  | x
| Upsert a| Boolean |  If the database should create the element if it does not exist. |  false |
| Multiple Update a| Boolean | If all or just the first document matching the query will be updated. |  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


[[updateDocumentsByFunctions]]
=== Update Documents By Functions

`<mongo:update-documents-by-functions>`


Update documents using one or more Mongo functions. If a query is not specified, all documents are retrieved. If there are duplicated operators, only the last one executes.


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The name of the collection to update. |  | x
| Find Query a| Binary |  The String query document used to detect the element to update |  |
| Functions a| Binary |  The String of functions used to execute the update. For example: `<$set,{"key":123}>` |  | x
| Upsert a| Boolean |  Whether the database should create the element if it does not exist. |  false |
| Multiple Update a| Boolean |  If all or just the first document matching the query will be updated. |  true |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable. a|  `#[payload]` |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

==== Throws

* MONGO:BULK_WRITE
* MONGO:CLIENT_EXCEPTION
* MONGO:COMMAND_ERROR
* MONGO:CONNECTIVITY
* MONGO:CURSOR_NOT_FOUND
* MONGO:DUPLICATE_KEY
* MONGO:EXECUTION_TIMEOUT
* MONGO:ILLEGAL_ARGUMENT
* MONGO:INCOMPATIBLE_DRIVER
* MONGO:INTERNAL_EXCEPTION
* MONGO:INTERRUPTED
* MONGO:INVALID_CREDENTIALS
* MONGO:IO_EXCEPTION
* MONGO:MAPPING_EXCEPTION
* MONGO:MONGO_GRID_FS
* MONGO:MongoExecution
* MONGO:NODE_IS_RECOVERING
* MONGO:NOT_PRIMARY
* MONGO:QUERY_ERROR
* MONGO:RETRY_EXHAUSTED
* MONGO:SECURITY
* MONGO:SERVER_ERROR
* MONGO:SOCKET
* MONGO:SOCKET_CLOSED
* MONGO:SOCKET_OPEN
* MONGO:SOCKET_READ_ERROR
* MONGO:SOCKET_READ_TIMEOUT
* MONGO:SOCKET_WRITE_ERROR
* MONGO:TIMEOUT
* MONGO:UNKNOWN
* MONGO:WAIT_QUEUE_FULL
* MONGO:WRITE
* MONGO:WRITE_CONCERN


== Sources

[[deleted-object-trigger]]
=== Deleted Object

`<mongo:deleted-object-trigger>`


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The collection to watch to detect the matching documents. |  | x
| Field Name a| String a| The field to query to detect the objects that match the trigger condition. For New Objects trigger, if it is empty, the `_id` field is used. |  |
| Since a| String a| Specify an initial value from when to start querying objects. If this field is empty, this operation retrieves the selected objects from the time the Mule app is started. For most objects types, the `Object#toString()` representation is sufficient. For Date objects, use the `Date#getTime()` representation. |  |
| Primary Node Only a| Boolean |  Whether this source should only be executed on the primary node when running in a cluster. |  |
| Scheduling Strategy a| scheduling-strategy | Configures the scheduler that triggers polling. |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

[[modified-object-trigger]]
=== Modified Object

`<mongo:modified-object-trigger>`


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The collection to watch to detect the matching documents. |  | x
| Field Name a| String a|  The field to query to detect the objects that match the trigger condition. For New Objects trigger, if it is empty, the `_id` field is used. |  |
| Since a| String a| Specify an initial value from when to start querying objects. If this field is empty, this operation retrieves the selected objects from the time the Mule app is started. For most objects types, the `Object#toString()` representation is sufficient. For Date objects, use the `Date#getTime()` representation. |  |
| Primary Node Only a| Boolean |  Whether this source should only be executed on the primary node when running in a cluster. |  |
| Scheduling Strategy a| scheduling-strategy |  Configures the scheduler that triggers the polling. |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>



[[new-object-trigger]]
=== New Object

`<mongo:new-object-trigger>`


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Collection Name a| String |  The collection to watch to detect the matching documents. |  | x
| Field Name a| String a|  The field to query to detect the objects that match the trigger condition. For New Objects trigger, if it is empty the `_id` field to use. |  |
| Since a| String a| Specify an initial value from when to start querying objects. If this field is empty, this operation retrieves the selected objects from the time the Mule app is started. For most objects types, the `Object#toString()` representation is sufficient. For Date objects  use the `Date#getTime()` representation. |  |
| Primary Node Only a| Boolean |  Whether to execute this source only on the primary node when running in a cluster. |  |
| Scheduling Strategy a| scheduling-strategy | Configures the scheduler that triggers polling. |  | x
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
|===

=== For Configurations

* <<config>>

== Types

[[Tls]]
=== TLS

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Enabled Protocols a| String | A comma-separated list of protocols enabled for this context. |  |
| Enabled Cipher Suites a| String | A comma-separated list of cipher suites enabled for this context. |  |
| Trust Store a| <<TrustStore>> |  |  |
| Key Store a| <<KeyStore>> |  |  |
| Revocation Check a| * <<standard-revocation-check>>
* <<custom-ocsp-responder>>
* <<crl-file>> |  |  |
|===

[[TrustStore]]
=== Trust Store

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Path a| String | The location that resolves relative to the current classpath and file system (if possible) of the trust store. |  |
| Password a| String | The password used to protect the trust store. |  |
| Type a| String | The type of store used. |  |
| Algorithm a| String | The algorithm used by the trust store. |  |
| Insecure a| Boolean | If true, no certificate validations are performed, rendering connections vulnerable to attacks. Use at your own risk. |  |
|===

[[KeyStore]]
=== Key Store

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Path a| String | The location that resolves relative to the current classpath and file system (if possible) of the key store. |  |
| Type a| String | The type of store used. |  |
| Alias a| String | When the key store contains many private keys, this attribute indicates the alias of the key that should be used. If not defined, the first key in the file is used by default. |  |
| Key Password a| String | The password used to protect the private key. |  |
| Password a| String | The password used to protect the key store. |  |
| Algorithm a| String | The algorithm used by the key store. |  |
|===

[[standard-revocation-check]]
=== Standard Revocation Check

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Only End Entities a| Boolean | Only verify the last element of the certificate chain. |  |
| Prefer Crls a| Boolean | Try CRL instead of OCSP first. |  |
| No Fallback a| Boolean | Do not use the secondary checking method (the one not selected before). |  |
| Soft Fail a| Boolean | Avoid verification failure when the revocation server cannot be reached or is busy. |  |
|===

[[custom-ocsp-responder]]
=== Custom OCSP Responder

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Url a| String | The URL of the OCSP responder. |  |
| Cert Alias a| String | Alias of the signing certificate for the OCSP response (must be in the trust store), if present. |  |
|===

[[crl-file]]
=== CRL File

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Path a| String | The path to the CRL file. |  |
|===

[[Reconnection]]
=== Reconnection

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> | The reconnection strategy to use. |  |
|===

[[reconnect]]
=== Reconnect

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| Count a| Number | How many reconnection attempts to make. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[reconnect-forever]]
=== Reconnect Forever

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| blocking |Boolean | If false, the reconnection strategy runs in a separate, non-blocking thread. |true |
|===

[[ExpirationPolicy]]
=== Expiration Policy

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration. |  |
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute. |  |
|===

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | The amount of memory to allocate to consume the stream and provide random access to it. If the stream contains more data than can fit into this buffer, then the buffer expands according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. |  |
| Buffer Size Increment a| Number | By how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised when the buffer gets full. |  |
| Max Buffer Size a| Number | The maximum amount of memory to use. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised. A value lower than or equal to zero means no limit. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which all these attributes are expressed. |  |
|===

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Max In Memory Size a| Number | Defines the maximum memory that the stream should use to keep data in memory. If more than that is consumed, then it starts to buffer the content on disk. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed. |  |
|===

[[RedeliveryPolicy]]
=== Redelivery Policy

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | The maximum number of times a message can be redelivered and processed unsuccessfully before triggering a process-failed message. |  |
| Use Secure Hash a| Boolean | Whether to use a secure hash algorithm to identify a redelivered message. |  |
| Message Digest Algorithm a| String | The secure hashing algorithm to use. If not set, the default is SHA-256. |  |
| Id Expression a| String | Defines one or more expressions to use to determine when a message has been redelivered. This property may only be set if useSecureHash is false. |  |
| Object Store a| Object Store | The object store where the redelivery counter for each message is going to be stored. |  |
|===

[[MuleBsonObjectId]]
=== Mule BSON Object ID

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Value a| <<MongoIdObject>> |  |  |
|===

[[MongoIdObject]]
=== Mongo ID Object

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Counter a| Number |  |  |
| Date a| String |  |  |
| Machine Identifier a| Number |  |  |
| Process Identifier a| Number |  |  |
| Time a| Number |  |  |
| Time Second a| Number |  |  |
| Timestamp a| Number |  |  |
|===

== See Also

https://help.mulesoft.com[MuleSoft Help Center]
