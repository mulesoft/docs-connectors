= MongoDB Connector 6.3 - Mule 4
:page-aliases: connectors::mongodb/mongodb-connector-6-0.adoc



Anypoint Connector for MongoDB (MongoDB Connector) is a closed-source connector that provides a connection between the Mule runtime engine (Mule) and third-party software on a MongoDB server.

Release Notes: xref:release-notes::connector/mongodb-connector-release-notes-mule-4.adoc[MongoDB Connector Release Notes] +
Exchange: https://www.mulesoft.com/exchange/com.mulesoft.connectors/mule-mongodb-connector/[MongoDB Connector]

== Before You Begin

To use this connector, you must be familiar with MongoDB, Mule runtime engine (Mule), Anypoint Connectors, Anypoint Studio, elements in a Mule flow, and global elements.

Before creating an app, you must have access to the MongoDB target resource and Anypoint Platform. You must also understand how to create a Mule app using Anypoint Studio.

To use the this connector, you need:

* A MongoDB instance
* A set of valid credentials, including the required MongoDB endpoints that point to your instance

== Common Use Cases for the Connector

Common use cases for MongoDB Connector include:

* *Single View of Data*
+
Create a single view of your most important data and aggregate your siloed data from multiple enterprise systems, transform the data, and write the data to MongoDB. For example, you can import data into a CSV format from a local directory into MongoDB.

* *Mainframe Offloading*
+
Mirror or synchronize your operational data from mainframes into MongoDB to offload workloads from your mainframes while enabling the ability to meet your customer where they are.

* *Real-time Analytics*
+
Leverage MongoDBâ€™s rich query language to make real-time decisions on shipping, inventory, and pricing, and analyze any data using documents in MongoDB.

* *Personalization*
+
Create personalized omnichannel retail experiences by collecting and synchronizing data across your retail channels and your backend systems into MongoDB.

For examples of these use cases, refer to xref:mongodb-connector-examples.adoc[MongoDB Connector Examples].


== Authentication

This connector does not validate all possible authentication types.

== Exchange Example

https://www.mulesoft.com/exchange/org.mule.examples/importing-a-CSV-file-into-Mongo-DB/[Anypoint Exchange] has an example that shows how to import data in a CSV format from a local directory into MongoDB.

== Important Considerations when Migrating from Mule 3 to Mule 4

When migrating Mule apps that use MongoDB Connector from Mule 3 to Mule 4, consider the following changes in date handling:

* *Automatic conversion to UTC*
+
In Mule 3, MongoDB Connector stores dates exactly as they are sent, preserving the original timezone. However, in Mule 4, dates (whether they are sent to or retrieved from MongoDB) are automatically converted to UTC before they are stored in MongoDB. This change ensures more consistent and standardized date handling in a distributed environment. 

* *ISO 8601 format*
+
Dates (whether they are sent to or retrieved from MongoDB) in JSON documents are transformed to the ISO 8601 format. Additionally, any String values in JSON documents that match the ISO 8601 format are automatically transformed and stored as Date types in MongoDB. This change ensures more consistent and standardized date handling in a distributed environment. 

* *Millisecond truncation*
+
Dates (whether they are sent to or retrieved from MongoDB) that include milliseconds with a value of `.000` are not shown in the output generated by MongoDB Connector in Mule 4. This behavior differs from Mule 3, in which all date components are preserved.

Here is an example of the changes in date handling in a Mule app when migrating from Mule 3 to Mule 4:

Mule 3:
[source,json,linenums]
----
{
  "timeStamp": "2024-06-17T16:44:17.000+01:00"
}
----

Mule 4:
[source,json,linenums]
----
{
  "timeStamp": "2024-06-17T15:44:17+00:00"
}
----

Because of these changes in date handling, it is important to:

* *Review flows involving dates*
+
If your Mule apps rely on specific timezones of dates stored in MongoDB, you must review and possibly adjust flows to correctly handle the UTC conversion in Mule 4.

* *Test thoroughly*
+
Conduct thorough testing in a controlled environment to ensure that the changes in date handling do not negatively impact the expected behavior of the Mule app.

* *Document the behavioral differences*
+
Document the key differences in date handling between Mule 3 and Mule 4 to ensure smooth transition and adaptation.

== Next Steps

After you complete the prerequisites and experiment with the example, you are ready to create an app with xref:mongodb-connector-studio.adoc[Studio].

== See Also

* xref:connectors::introduction/intro-use-exchange.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
